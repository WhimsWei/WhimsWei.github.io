<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>python实现设计模式之策略模式</title>
      <link href="/2018/11/18/python%E5%AE%9E%E7%8E%B0%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/11/18/python%E5%AE%9E%E7%8E%B0%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h2 id="1-初始"><a href="#1-初始" class="headerlink" title="1 初始"></a>1 初始</h2><p>创建一个超类Duck，所有鸭子继承它。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class Duck:</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def quack(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def swime(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def display(self):</span><br><span class="line">        # 继承的鸭子实现这个方法</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    # 新增功能</span><br><span class="line">    def fly(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MallardDuck(Duck):</span><br><span class="line"></span><br><span class="line">    def display(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class ReadHeadDuck(Duck):</span><br><span class="line"></span><br><span class="line">    def display(self):</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure><p>现在为了让鸭子能飞， 加入方法fly()， 这样就导致所有鸭子都会飞， 这不符合实际情况。</p><h3 id="1-1-办法一：-重写"><a href="#1-1-办法一：-重写" class="headerlink" title="1.1 办法一： 重写"></a>1.1 办法一： 重写</h3><p>重写会导致每个继承的鸭子都需要重写</p><h3 id="1-2-方法二：接口"><a href="#1-2-方法二：接口" class="headerlink" title="1.2 方法二：接口"></a>1.2 方法二：接口</h3><p>在java中接口需要实现，所以不利于代码复用。</p><h3 id="1-3-方法三：-继承"><a href="#1-3-方法三：-继承" class="headerlink" title="1.3 方法三： 继承"></a>1.3 方法三： 继承</h3><p>设计原则： 封装变化（需要变化的和不需要变化的代码不要混合在一起，应该把变化的部分独立出来）。</p><p>于是将fly()单独写一个类，有飞行功能的鸭子继承即可。</p><p>设计原则2： 针对接口编程，而不是针对实现编程。</p><h3 id="1-4-整合之后"><a href="#1-4-整合之后" class="headerlink" title="1.4 整合之后"></a>1.4 整合之后</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">class Duck:</span><br><span class="line">    fly_behavior = None</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def display(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def perform_fly(self):</span><br><span class="line">        self.fly_behavior.fly()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class FlyBase:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class FlyWithWings(FlyBase):</span><br><span class="line">    def fly(self):</span><br><span class="line">        print &quot;fly..&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class FlyNoWay(FlyBase):</span><br><span class="line">    def fly(self):</span><br><span class="line">        print &quot;cannot fly..&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class RedHeadDuck(Duck):</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.fly_behavior = FlyNoWay()</span><br><span class="line"></span><br><span class="line">    def display(self):</span><br><span class="line">        print &quot;read head&quot;</span><br></pre></td></tr></table></figure><h3 id="1-5-进一步封装"><a href="#1-5-进一步封装" class="headerlink" title="1.5 进一步封装"></a>1.5 进一步封装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class RedHeadDuck(Duck):</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.fly_behavior = FlyNoWay()</span><br><span class="line"></span><br><span class="line">    def display(self):</span><br><span class="line">        print &quot;read head&quot;</span><br><span class="line"></span><br><span class="line">    def set_fly_behavior(self, fly_behavior):</span><br><span class="line">        self.fly_behavior = fly_behavior</span><br></pre></td></tr></table></figure><h3 id="1-6-组合"><a href="#1-6-组合" class="headerlink" title="1.6 组合"></a>1.6 组合</h3><p>组合： 将两个类结合起来使用，类似Duck和fly_behavior。</p><p>设计原则3： 多用组合，少用继承。</p><h3 id="1-7-总结"><a href="#1-7-总结" class="headerlink" title="1.7 总结"></a>1.7 总结</h3><p>这就是第一个设计模式： 策略模式。</p><p>策略模式： 定义算法族，分别封装起来，让他们之间可以互相替换，此模式让算法的变化独立于使用算法的客户。</p><h2 id="2-共享词汇"><a href="#2-共享词汇" class="headerlink" title="2 共享词汇"></a>2 共享词汇</h2><p>通用的设计模式词汇方便沟通，熟悉的大家一说名字便知道意义。</p><p>但是不要滥用设计模式，不要在任何不需要的设计模式情况下使用设计模式。</p>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Do As Infinity-楽园</title>
      <link href="/2018/10/27/%E6%A5%BD%E5%9B%AD/"/>
      <url>/2018/10/27/%E6%A5%BD%E5%9B%AD/</url>
      <content type="html"><![CDATA[<h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>誰もが皆知ってる<br>だれもがみな しってる</p><p>消せやしない傷を<br>けせやしない きずを</p><p>どれくらい　続くの？<br>どれくらい つづくの</p><p>もういらないよ<br>もう いらないよ</p><h3 id="A-1"><a href="#A-1" class="headerlink" title="A"></a>A</h3><p>誰もが皆待ってる<br>だれもがみな まってる</p><p>争いのない日々を<br>あらそいのない ひび々を</p><p>戦場の兵士たち<br>せんじょうの へいしたち</p><p>思い出してよ<br>おもいだしてよ</p><p>今母の温もりを<br>いまははのぬぐもりを</p><h3 id="B1"><a href="#B1" class="headerlink" title="B1"></a>B1</h3><p>この果てしなく広い世界に<br>このは/ てしなく/ ひろい/ せかいに</p><p>自分だけの地図描いて<br>じぶん/ だけのち/ ずえがいて</p><p>涙こらえて僕等は 歩いてゆこう<br>なみだ/ こらえて/ ぼくらは/ あるいて/ ゆこう</p><h3 id="B2"><a href="#B2" class="headerlink" title="B2"></a>B2</h3><p>立ち上がれ今ほら何度でも<br>たちあがれいま ほらな/ んどでも</p><p>眠れる獅子呼び起こして<br>ねむれ/ るししよ/ びお/ こして</p><p>生きてゆくんだ 明日へ<br>いき\ て(ゆ)\ く\ んだ あしたへ</p><h3 id="A-2"><a href="#A-2" class="headerlink" title="A"></a>A</h3><p>誰もが皆 持ってる<br>だれもがみな もってる</p><p>一欠片の　愛を<br>ひとかけらの あいを</p><p>憎んでも　何一つ<br>にくんでも なにひとつ</p><p>生まれないんだよ<br>うまれないんだよ</p><p>そんなのもういらないよ<br>そんなのもう いらないよ</p><h3 id="B1-1"><a href="#B1-1" class="headerlink" title="B1"></a>B1</h3><p>この限りある　時間の中で<br>このかぎりある じかん/ のな/ かで</p><p>まだ見ぬ　楽園目指して<br>まだみ/ ぬらくえ/ んめ/ ざして</p><p>どこまでだって　僕等は 歩いてゆこう</p><h3 id="B2-1"><a href="#B2-1" class="headerlink" title="B2"></a>B2</h3><p>振り向かないで　前だけを見て<br>ふりむかないで まえだけをみて</p><p>その身体　朽ち果てるまで<br>そのか/ らだくち/ はてるまで</p><p>生きてゆくんだ 未来へ<br>いきて\ (ゆ)く\ んだ\ みらいへ</p><h3 id="A2"><a href="#A2" class="headerlink" title="A2"></a>A2</h3><p>思い出してよ<br>おもいだしてよ</p><p>今　母の温もりを・・・<br>いま\ ははのぬ\ ぐもりを</p><h3 id="B1-2"><a href="#B1-2" class="headerlink" title="B1"></a>B1</h3><p>この果てしなく　広い世界の<br>このは\ てしなく\ ひろい\ せかいの</p><p>まだ見ぬ　楽園目指して<br>まだみ/ ぬらくえ/ んめ/ ざして</p><p>どこまでだって　僕等は 歩いてゆこう<br>どこまでだって/ ぼく/ らは/ あるいて/ ゆこう</p><h3 id="B2-2"><a href="#B2-2" class="headerlink" title="B2"></a>B2</h3><p>振り向かないで　前だけを見て<br>ふりむかないで まえだけをみて</p><p>その身体　朽ち果てるまで<br>そのか/ らだくち/ はてるまで</p><p>生きてゆくんだ 未来へ<br>いきて\ (ゆ)く\ んだ\ みらいへ</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>sentry简单了解</title>
      <link href="/2018/10/27/sentry/"/>
      <url>/2018/10/27/sentry/</url>
      <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>sentry是一个用于实时抓取程序错误栈的利器。</p>]]></content>
      
      <categories>
          
          <category> server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> server </tag>
            
            <tag> sentry </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>同步和异步</title>
      <link href="/2018/10/27/%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5/"/>
      <url>/2018/10/27/%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5/</url>
      <content type="html"><![CDATA[<h2 id="1-同步模型"><a href="#1-同步模型" class="headerlink" title="1 同步模型"></a>1 同步模型</h2><p>这是最简单的编程方式。</p><p>在一个时刻，只能有一个任务在执行，并且前一个任务结束后一个任务才能开始。</p><p><img src="http://likebeta.gitbooks.io/twisted-intro-cn/content/zh/_static/p01_sync.png" alt="同步模型示意图"></p><h2 id="2-线程模型"><a href="#2-线程模型" class="headerlink" title="2 线程模型"></a>2 线程模型</h2><h3 id="2-1-进程和线程"><a href="#2-1-进程和线程" class="headerlink" title="2.1 进程和线程"></a>2.1 进程和线程</h3><p>进程是一个资源单位，现成是CPU调度单位。</p><p>程之间不共享资源，但是同一个进程下的线程是可以共享资源的。</p><h3 id="2-2-线程模型"><a href="#2-2-线程模型" class="headerlink" title="2.2 线程模型"></a>2.2 线程模型</h3><p>在这个模型中，每个任务都在单独的线程中完成。</p><p><img src="http://likebeta.gitbooks.io/twisted-intro-cn/content/zh/_static/p01_threaded.png" alt="线程模型"></p><p>这些线程都是由操作系统来管理。</p><p>若在多处理机、多核处理机的系统中可能会相互独立的运行；</p><p>若在单处理机上，则会交错运行。一个核执行一个单独的线程。</p><p>关键点在于，在线程模式中，具体哪个任务执行由操作系统来处理。</p><h2 id="3-异步编程模型"><a href="#3-异步编程模型" class="headerlink" title="3 异步编程模型"></a>3 异步编程模型</h2><h3 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h3><p>在这个模型中，任务是交错完成。</p><p>值得注意的是：这是在单线程的控制下。</p><p>这要比多线程模型简单多了，因为编程人员总可以认为只有一个任务在执行，而其它的在停止状态。</p><h3 id="3-2-和线程模型的区别"><a href="#3-2-和线程模型的区别" class="headerlink" title="3.2 和线程模型的区别"></a>3.2 和线程模型的区别</h3><p>典型的现成模型是各个任务并行运行，但是对于单核CPU的时候，执行方式就和异步模型类似了。</p><p>此时的区别是：</p><ul><li>线程模式中任务的切换是由操作系统决定的。</li><li>在异步模型中，任务的切换需要手动编写代码来切换任务。</li></ul><h2 id="4-阻塞"><a href="#4-阻塞" class="headerlink" title="4 阻塞"></a>4 阻塞</h2><p>如果任务都是CPU计算之类的内容， 那么实际上异步模型和同步模型消耗的时间是一样的。</p><p>但是如果任务中有阻塞（IO等操作）， 在任务阻塞的时候执行别的任务， 这样就有利于节省时间。</p><p><img src="http://likebeta.gitbooks.io/twisted-intro-cn/content/zh/_static/p01_block.png" alt="同步模型下出现阻塞"></p><p>所以异步模型至少有两个优点：</p><ul><li>针对有阻塞的任务可以加快任务完成；</li><li>针对服务来说，由于异步模型会来回切换，客户端就能够更快的接收到服务端的响应，从而减少客户端的等待时间。</li></ul>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 同步 </tag>
            
            <tag> 异步 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>前后端分离思想概述</title>
      <link href="/2018/10/27/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/"/>
      <url>/2018/10/27/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/</url>
      <content type="html"><![CDATA[<h2 id="1-MVC模型"><a href="#1-MVC模型" class="headerlink" title="1 MVC模型"></a>1 MVC模型</h2><p>全名为Model-View-Controller，即模型-视图-控制器。</p><p><img src="http://static.zybuluo.com/Rico123/et4q5o2ok4ryi6dniwifvcx0/MVC.jpg" alt="mvc模型"></p><p>不足：</p><ul><li>过程复杂。每次请求必须经过“控制器-&gt;模型-&gt;视图”这个流程，用户才能看到最终的展现的界面；</li><li>过于依赖模型。实际上视图是依赖于模型的，换句话说，如果没有模型，视图也无法呈现出最终的效果；</li><li>页面性能较差。渲染视图的过程是在服务端来完成的，最终呈现给浏览器的是带有模型的视图页面，性能无法得到很好的优化。</li></ul><h2 id="2-REST"><a href="#2-REST" class="headerlink" title="2 REST"></a>2 REST</h2><p>为了进一步改进MVC模型， 做了如下改进。</p><p>页面View全程ajax请求Controller，通过与Model交互完成json数据并且返回。</p><p><img src="http://static.zybuluo.com/Rico123/yxk2m9upgn5kzi2027d4v4z5/MVC+%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB.jpg" alt="REST"></p><p>REST全称是Representational State Transfer（表述性状态转移）。</p><p>逐渐实现概念，前后端分离。</p><p><img src="http://static.zybuluo.com/Rico123/v98uooq7qquiems7jvhdxm0c/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB.jpg" alt="前后端分离"></p>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 前后端分离 </tag>
            
            <tag> MVC </tag>
            
            <tag> REST </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python创建虚拟环境</title>
      <link href="/2018/10/27/%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"/>
      <url>/2018/10/27/%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/</url>
      <content type="html"><![CDATA[<h2 id="1-安装虚拟环境"><a href="#1-安装虚拟环境" class="headerlink" title="1 安装虚拟环境"></a>1 安装虚拟环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br><span class="line">virtualenv --no-site-packages venv</span><br></pre></td></tr></table></figure><h2 id="2-进入虚拟环境"><a href="#2-进入虚拟环境" class="headerlink" title="2 进入虚拟环境"></a>2 进入虚拟环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> venv/bin/activate</span><br></pre></td></tr></table></figure><h2 id="3-安装包"><a href="#3-安装包" class="headerlink" title="3 安装包"></a>3 安装包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h2 id="4-生成需求包"><a href="#4-生成需求包" class="headerlink" title="4 生成需求包"></a>4 生成需求包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure><h2 id="5-删除虚拟环境"><a href="#5-删除虚拟环境" class="headerlink" title="5 删除虚拟环境"></a>5 删除虚拟环境</h2><p>直接删除文件夹</p>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 虚拟环境 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>设置Mac</title>
      <link href="/2018/10/27/%E8%AE%BE%E7%BD%AEmac/"/>
      <url>/2018/10/27/%E8%AE%BE%E7%BD%AEmac/</url>
      <content type="html"><![CDATA[<h2 id="1-设置launchpad的展示方式"><a href="#1-设置launchpad的展示方式" class="headerlink" title="1 设置launchpad的展示方式"></a>1 设置launchpad的展示方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dock springboard-columns -int 12</span><br><span class="line">defaults write com.apple.dock springboard-rows -int 8</span><br><span class="line">defaults write com.apple.dock ResetLaunchPad -bool TRUE</span><br><span class="line">killall Dock</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Rector模式概述</title>
      <link href="/2018/10/27/reactor%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/10/27/reactor%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h2 id="1-异步请求的客户端"><a href="#1-异步请求的客户端" class="headerlink" title="1 异步请求的客户端"></a>1 异步请求的客户端</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_poetry</span><span class="params">(sockets)</span>:</span></span><br><span class="line">    <span class="string">"""Download poety from all the given sockets."""</span></span><br><span class="line"></span><br><span class="line">    poems = dict.fromkeys(sockets, <span class="string">''</span>) <span class="comment"># socket -&gt; accumulated poem</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># socket -&gt; task numbers</span></span><br><span class="line">    sock2task = dict([(s, i + <span class="number">1</span>) <span class="keyword">for</span> i, s <span class="keyword">in</span> enumerate(sockets)])</span><br><span class="line"></span><br><span class="line">    sockets = list(sockets) <span class="comment"># make a copy</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># we go around this loop until we've gotten all the poetry</span></span><br><span class="line">    <span class="comment"># from all the sockets. This is the 'reactor loop'.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> sockets:</span><br><span class="line">        <span class="comment"># this select call blocks until one or more of the</span></span><br><span class="line">        <span class="comment"># sockets is ready for read I/O</span></span><br><span class="line">        rlist, _, _ = select.select(sockets, [], [])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># rlist is the list of sockets with data ready to read</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> sock <span class="keyword">in</span> rlist:</span><br><span class="line">            data = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    new_data = sock.recv(<span class="number">1024</span>)</span><br><span class="line">                <span class="keyword">except</span> socket.error, e:</span><br><span class="line">                    <span class="keyword">if</span> e.args[<span class="number">0</span>] == errno.EWOULDBLOCK:</span><br><span class="line">                        <span class="comment"># this error code means we would have</span></span><br><span class="line">                        <span class="comment"># blocked if the socket was blocking.</span></span><br><span class="line">                        <span class="comment"># instead we skip to the next socket</span></span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">raise</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> new_data:</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        data += new_data</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Each execution of this inner loop corresponds to</span></span><br><span class="line">            <span class="comment"># working on one asynchronous task in Figure 3 here:</span></span><br><span class="line">            <span class="comment"># http://krondo.com/?p=1209#figure3</span></span><br><span class="line"></span><br><span class="line">            task_num = sock2task[sock]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                sockets.remove(sock)</span><br><span class="line">                sock.close()</span><br><span class="line">                <span class="keyword">print</span> <span class="string">'Task %d finished'</span> % task_num</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                addr_fmt = format_address(sock.getpeername())</span><br><span class="line">                msg = <span class="string">'Task %d: got %d bytes of poetry from %s'</span></span><br><span class="line">                <span class="keyword">print</span>  msg % (task_num, len(data), addr_fmt)</span><br><span class="line"></span><br><span class="line">            poems[sock] += data</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> poems</span><br></pre></td></tr></table></figure><ol><li>异步模式客户端一次性与全部服务器完成连接，而不像同步模式那样一次只连接一个。</li><li>用来进行通信的Socket方法是非阻塞模的，这是通过调用setblocking(0)来实现的。</li><li>select模块中的select方法是用来识别其监视的socket是否有完成数据接收的，如果没有它就处于阻塞状态。</li><li>使用select函数等待所有Socket，直到至少有一个socket有数据到来。</li><li>对每个有数据需要读取的socket，从中读取数据。但仅仅只是读取有效数据，不能为了等待还没来到的数据而发生阻塞。</li><li>由于不断发送， 有可能</li></ol><h2 id="2-reactor模式"><a href="#2-reactor模式" class="headerlink" title="2 reactor模式"></a>2 reactor模式</h2><p>这种，等待事件到来，然后对事件进行处理，处理完毕之后又继续等待事件到来的模型， 就被故写成了reactor模式。</p>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> Rector </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/2018/10/27/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/"/>
      <url>/2018/10/27/git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h2 id="匹配写法"><a href="#匹配写法" class="headerlink" title="匹配写法"></a>匹配写法</h2><h3 id="后缀"><a href="#后缀" class="headerlink" title="后缀"></a>后缀</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*.log</span><br></pre></td></tr></table></figure><h3 id="文件夹"><a href="#文件夹" class="headerlink" title="文件夹"></a>文件夹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/venv</span><br></pre></td></tr></table></figure><h3 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">*.a             表示忽略所有 .a 结尾的文件</span><br><span class="line">!lib.a          表示但lib.a除外</span><br><span class="line">/TODO           表示仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span><br><span class="line">build/          表示忽略 build/目录下的所有文件，过滤整个build文件夹；</span><br><span class="line">doc/*.txt       表示会忽略doc/notes.txt但不包括 doc/server/arch.txt</span><br><span class="line"> </span><br><span class="line">bin/:           表示忽略当前路径下的bin文件夹，该文件夹下的所有内容都会被忽略，不忽略 bin 文件</span><br><span class="line">/bin:           表示忽略根目录下的bin文件</span><br><span class="line">/*.c:           表示忽略cat.c，不忽略 build/cat.c</span><br><span class="line">debug/*.obj:    表示忽略debug/io.obj，不忽略 debug/common/io.obj和tools/debug/io.obj</span><br><span class="line">**/foo:         表示忽略/foo,a/foo,a/b/foo等</span><br><span class="line">a/**/b:         表示忽略a/b, a/x/b,a/x/y/b等</span><br><span class="line">!/bin/run.sh    表示不忽略bin目录下的run.sh文件</span><br><span class="line">*.log:          表示忽略所有 .log 文件</span><br><span class="line">config.php:     表示忽略当前路径的 config.php 文件</span><br><span class="line"> </span><br><span class="line">/mtk/           表示过滤整个文件夹</span><br><span class="line">*.zip           表示过滤所有.zip文件</span><br><span class="line">/mtk/do.c       表示过滤某个具体文件</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>docker学习笔记</title>
      <link href="/2018/10/27/docker%E7%AC%94%E8%AE%B0/"/>
      <url>/2018/10/27/docker%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1 安装"></a>1 安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install docker</span><br></pre></td></tr></table></figure><p>需要下载安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://store.docker.com/editions/community/docker-ce-desktop-mac</span><br></pre></td></tr></table></figure><h2 id="2-使用"><a href="#2-使用" class="headerlink" title="2 使用"></a>2 使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ docker --version</span><br><span class="line">Docker version 18.03, build c97c6d6</span><br><span class="line"></span><br><span class="line">$ docker-compose --version</span><br><span class="line">docker-compose version 1.22.0, build 8dd22a9</span><br><span class="line"></span><br><span class="line">$ docker-machine --version</span><br><span class="line">docker-machine version 0.14.0, build 9ba6da9</span><br><span class="line"></span><br><span class="line">$ docker run hello-world</span><br><span class="line"></span><br><span class="line">$ docker run -d -p 80:80 --name webserver nginx</span><br><span class="line"># 80:80 前面是docker外面环境使用的端口 后面是docker内部使用的端口</span><br><span class="line"># 需要使用-p来指定端口</span><br><span class="line"></span><br><span class="line">$ docker container ls</span><br><span class="line">$ docker container stop webserver</span><br><span class="line">$ docker container ls -a</span><br><span class="line">$ docker container rm webserver</span><br><span class="line">$ docker image ls</span><br><span class="line">$ docker image rm nginx</span><br></pre></td></tr></table></figure><h3 id="2-1-创建一个Container"><a href="#2-1-创建一个Container" class="headerlink" title="2.1 创建一个Container"></a>2.1 创建一个Container</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir docker_file</span><br><span class="line"><span class="built_in">cd</span> docker_file</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">vim Dockerfile</span><br><span class="line"></span><br><span class="line"># Use an official Python runtime as a parent image</span><br><span class="line">FROM python:2.7-slim</span><br><span class="line"></span><br><span class="line"># Set the working directory to /app</span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"># Copy the current directory contents into the container at /app</span><br><span class="line">COPY . /app</span><br><span class="line"></span><br><span class="line"># Install any needed packages specified in requirements.txt</span><br><span class="line">RUN pip install --trusted-host pypi.python.org -r requirements.txt</span><br><span class="line"></span><br><span class="line"># Make port 80 available to the world outside this container</span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line"># Define environment variable</span><br><span class="line">ENV NAME World</span><br><span class="line"></span><br><span class="line"># Run app.py when the container launches</span><br><span class="line">CMD [&quot;python&quot;, &quot;app.py&quot;]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim requirements.txt</span><br><span class="line"></span><br><span class="line">Flask</span><br><span class="line">Redis</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vim app.py</span><br><span class="line"></span><br><span class="line">from flask import Flask</span><br><span class="line">from redis import Redis, RedisError</span><br><span class="line">import os</span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line"># Connect to Redis</span><br><span class="line">redis = Redis(host=&quot;redis&quot;, db=0, socket_connect_timeout=2, socket_timeout=2)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">@app.route(&quot;/&quot;)</span><br><span class="line">def hello():</span><br><span class="line">    try:</span><br><span class="line">        visits = redis.incr(&quot;counter&quot;)</span><br><span class="line">    except RedisError:</span><br><span class="line">        visits = &quot;&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;&quot;</span><br><span class="line"></span><br><span class="line">    html = &quot;&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;&quot; \</span><br><span class="line">           &quot;&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;&quot; \</span><br><span class="line">           &quot;&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;&quot;</span><br><span class="line">    return html.format(name=os.getenv(&quot;NAME&quot;, &quot;world&quot;), hostname=socket.gethostname(), visits=visits)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    app.run(host=&apos;0.0.0.0&apos;, port=80)</span><br></pre></td></tr></table></figure><p>创建container</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t friendlyhello .</span><br></pre></td></tr></table></figure><p>运行app</p><p>其中-p用于绑定端口，4000:80 前面是docker外面环境使用的端口，后面是docker内部使用的端口。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 4000:80 friendlyhello</span><br></pre></td></tr></table></figure><p>后台运行app</p><p>使用-d， 可以合在一起写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 4000:80 friendlyhello</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  docker_file docker run -dp 4000:80 friendlyhello</span><br><span class="line">bfc28faf20c23567d7a83667f2040c1469d6adae00ffe45257f494c72e778efe</span><br><span class="line">➜  docker_file docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">bfc28faf20c2        friendlyhello       &quot;python app.py&quot;     48 seconds ago      Up 46 seconds       0.0.0.0:4000-&gt;80/tcp   xenodochial_jackson</span><br><span class="line">➜  docker_file docker container stop bfc28faf20c2</span><br><span class="line">bfc28faf20c2</span><br></pre></td></tr></table></figure><p>发布到远程并且使用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">➜  docker_file docker login</span><br><span class="line">Authenticating with existing credentials...</span><br><span class="line">Login Succeeded</span><br><span class="line">➜  docker_file docker tag friendlyhello weihuchao/get-started:part1</span><br><span class="line">➜  docker_file docker image ls</span><br><span class="line">REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">friendlyhello           latest              13f8513def89        28 minutes ago      132MB</span><br><span class="line">weihuchao/get-started   part1               13f8513def89        28 minutes ago      132MB</span><br><span class="line">nginx                   latest              bc26f1ed35cf        4 days ago          109MB</span><br><span class="line">hello-world             latest              4ab4c602aa5e        3 weeks ago         1.84kB</span><br><span class="line">ubuntu                  latest              cd6d8154f1e1        3 weeks ago         84.1MB</span><br><span class="line">python                  2.7-slim            c9cde4658340        3 weeks ago         120MB</span><br><span class="line">➜  docker_file docker push weihuchao/get-started:part1</span><br><span class="line">The push refers to repository [docker.io/weihuchao/get-started]</span><br><span class="line">07c6549b588a: Pushed</span><br><span class="line">033e409ef04e: Pushed</span><br><span class="line">3e9874f94f33: Pushed</span><br><span class="line">d509372bacf0: Mounted from library/python</span><br><span class="line">18cc3d97f405: Mounted from library/python</span><br><span class="line">80db77e224a0: Mounted from library/python</span><br><span class="line">8b15606a9e3e: Mounted from library/python</span><br><span class="line">part1: digest: sha256:7c038d51ed3bee7f6bce70489f996a0a53ac050e112eff348a6419cc61beacd4 size: 1787</span><br><span class="line">➜  docker_file docker run -p 4000:80 weihuchao/get-started:part1</span><br><span class="line"> * Serving Flask app &quot;app&quot; (lazy loading)</span><br><span class="line"> * Environment: production</span><br><span class="line">   WARNING: Do not use the development server in a production environment.</span><br><span class="line">   Use a production WSGI server instead.</span><br><span class="line"> * Debug mode: off</span><br><span class="line"> * Running on http://0.0.0.0:80/ (Press CTRL+C to quit)</span><br></pre></td></tr></table></figure><p>用到的命令总结</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">docker build -t friendlyhello .  # Create image using this directory&apos;s Dockerfile</span><br><span class="line">docker run -p 4000:80 friendlyhello  # Run &quot;friendlyname&quot; mapping port 4000 to 80</span><br><span class="line">docker run -d -p 4000:80 friendlyhello         # Same thing, but in detached mode</span><br><span class="line">docker container ls                                # List all running containers</span><br><span class="line">docker container ls -a             # List all containers, even those not running</span><br><span class="line">docker container stop &lt;hash&gt;           # Gracefully stop the specified container</span><br><span class="line">docker container kill &lt;hash&gt;         # Force shutdown of the specified container</span><br><span class="line">docker container rm &lt;hash&gt;        # Remove specified container from this machine</span><br><span class="line">docker container rm $(docker container ls -a -q)         # Remove all containers</span><br><span class="line">docker image ls -a                             # List all images on this machine</span><br><span class="line">docker image rm &lt;image id&gt;            # Remove specified image from this machine</span><br><span class="line">docker image rm $(docker image ls -a -q)   # Remove all images from this machine</span><br><span class="line">docker login             # Log in this CLI session using your Docker credentials</span><br><span class="line">docker tag &lt;image&gt; username/repository:tag  # Tag &lt;image&gt; for upload to registry</span><br><span class="line">docker push username/repository:tag            # Upload tagged image to registry</span><br><span class="line">docker run username/repository:tag                   # Run image from a registry</span><br></pre></td></tr></table></figure><h3 id="2-2-服务"><a href="#2-2-服务" class="headerlink" title="2.2 服务"></a>2.2 服务</h3><p>对于分布式程序， 每个分片就是一个服务。</p><p>创建一个compose文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">➜  docker_file vim docker-compose.yml</span><br><span class="line">➜  docker_file cat docker-compose.yml</span><br><span class="line">version: &quot;3&quot;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    # replace username/repo:tag with your name and image details</span><br><span class="line">    image: weihuchao/get-started:part1</span><br><span class="line">    deploy:</span><br><span class="line">      replicas: 5</span><br><span class="line">      resources:</span><br><span class="line">        limits:</span><br><span class="line">          cpus: &quot;0.1&quot;</span><br><span class="line">          memory: 50M</span><br><span class="line">      restart_policy:</span><br><span class="line">        condition: on-failure</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;4000:80&quot;</span><br><span class="line">    networks:</span><br><span class="line">      - webnet</span><br><span class="line">networks:</span><br><span class="line">  webnet:</span><br></pre></td></tr></table></figure><ul><li>创建一个名为web的服务，运行5个实例。</li><li>一旦失败就重启</li><li>端口配置和之前的一致</li><li>通过名为webnet的负载均衡来进行负载均衡</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">➜  docker_file docker swarm init</span><br><span class="line">Swarm initialized: current node (u3dqg55kw2zuznsl8mkkoj0y4) is now a manager.</span><br><span class="line"></span><br><span class="line">To add a worker to this swarm, run the following command:</span><br><span class="line"></span><br><span class="line">    docker swarm join --token SWMTKN-1-1y7qkerfds031krhu1xry1jrxdiz5k7h2pxh6n9ue0xv9ccnta-70p3h13q9kje8ipbw4hd65wcg 192.168.65.3:2377</span><br><span class="line"></span><br><span class="line">To add a manager to this swarm, run &apos;docker swarm join-token manager&apos; and follow the instructions.</span><br><span class="line"></span><br><span class="line">➜  docker_file docker stack deploy -c docker-compose.yml getstartedlab</span><br><span class="line">Creating network getstartedlab_webnet</span><br><span class="line">Creating service getstartedlab_web</span><br><span class="line">➜  docker_file docker ps</span><br><span class="line">CONTAINER ID        IMAGE                         COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">d877cae608ad        weihuchao/get-started:part1   &quot;python app.py&quot;     8 seconds ago       Up 5 seconds        80/tcp              getstartedlab_web.2.ptnydvr11qh3pf6sojrp3w4c3</span><br><span class="line">1f5ec4db337b        weihuchao/get-started:part1   &quot;python app.py&quot;     8 seconds ago       Up 5 seconds        80/tcp              getstartedlab_web.5.clqmpbuxb3eara40eoj9uvkzi</span><br><span class="line">afdc3314b63b        weihuchao/get-started:part1   &quot;python app.py&quot;     8 seconds ago       Up 5 seconds        80/tcp              getstartedlab_web.4.tvhwox2d1r5zjds985mety0oj</span><br><span class="line">d4ca340faa6a        weihuchao/get-started:part1   &quot;python app.py&quot;     8 seconds ago       Up 5 seconds        80/tcp              getstartedlab_web.1.wd6dr71vlg84cxpla1g3l7vgh</span><br><span class="line">976e5e62ef00        weihuchao/get-started:part1   &quot;python app.py&quot;     8 seconds ago       Up 6 seconds        80/tcp              getstartedlab_web.3.2085k2dvw7q4lgyf5opjn5vqf</span><br><span class="line">➜  docker_file docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                         PORTS</span><br><span class="line">xfmdeis99zj7        getstartedlab_web   replicated          5/5                 weihuchao/get-started:part1   *:4000-&gt;80/tcp</span><br><span class="line">➜  docker_file docker service ps getstartedlab_web</span><br><span class="line">ID                  NAME                  IMAGE                         NODE                    DESIRED STATE       CURRENT STATE           ERROR               PORTS</span><br><span class="line">wd6dr71vlg84        getstartedlab_web.1   weihuchao/get-started:part1   linuxkit-025000000001   Running             Running 2 minutes ago</span><br><span class="line">ptnydvr11qh3        getstartedlab_web.2   weihuchao/get-started:part1   linuxkit-025000000001   Running             Running 2 minutes ago</span><br><span class="line">2085k2dvw7q4        getstartedlab_web.3   weihuchao/get-started:part1   linuxkit-025000000001   Running             Running 2 minutes ago</span><br><span class="line">tvhwox2d1r5z        getstartedlab_web.4   weihuchao/get-started:part1   linuxkit-025000000001   Running             Running 2 minutes ago</span><br><span class="line">clqmpbuxb3ea        getstartedlab_web.5   weihuchao/get-started:part1   linuxkit-025000000001   Running             Running 2 minutes ago</span><br><span class="line">➜  docker_file docker container ls -q</span><br><span class="line">d877cae608ad</span><br><span class="line">1f5ec4db337b</span><br><span class="line">afdc3314b63b</span><br><span class="line">d4ca340faa6a</span><br><span class="line">976e5e62ef00</span><br><span class="line">➜  docker_file docker stack rm getstartedlab</span><br><span class="line">Removing service getstartedlab_web</span><br><span class="line">Removing network getstartedlab_webnet</span><br><span class="line">➜  docker_file docker swarm leave --force</span><br><span class="line">Node left the swarm.</span><br></pre></td></tr></table></figure><p>需要先创建swarm， 在deploy。</p><p>通过负载均衡来访问集群中的不同的服务，不断访问主页可以看到有可能每次访问得到的hostname都是不同的。</p><p>用到的命令集合</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker stack ls                                            # List stacks or apps</span><br><span class="line">docker stack deploy -c &lt;composefile&gt; &lt;appname&gt;  # Run the specified Compose file</span><br><span class="line">docker service ls                 # List running services associated with an app</span><br><span class="line">docker service ps &lt;service&gt;                  # List tasks associated with an app</span><br><span class="line">docker inspect &lt;task or container&gt;                   # Inspect task or container</span><br><span class="line">docker container ls -q                                      # List container IDs</span><br><span class="line">docker stack rm &lt;appname&gt;                             # Tear down an application</span><br><span class="line">docker swarm leave --force      # Take down a single node swarm from the manager</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python脚本传入参数解析之optparse</title>
      <link href="/2018/10/27/optparse%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
      <url>/2018/10/27/optparse%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<h2 id="1-引入"><a href="#1-引入" class="headerlink" title="1 引入"></a>1 引入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> optparse</span><br></pre></td></tr></table></figure><h2 id="2-创建使用说明"><a href="#2-创建使用说明" class="headerlink" title="2 创建使用说明"></a>2 创建使用说明</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">usage = <span class="string">"""</span></span><br><span class="line"><span class="string">This is usage</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">parser = optparse.OptionParser(usage)</span><br></pre></td></tr></table></figure><h2 id="3-创建指定参数"><a href="#3-创建指定参数" class="headerlink" title="3 创建指定参数"></a>3 创建指定参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">help = <span class="string">"The interface to listen on. Default is localhost."</span></span><br><span class="line">parser.add_option(<span class="string">'--iface'</span>, help=help, default=<span class="string">'localhost'</span>)</span><br></pre></td></tr></table></figure><p>关于add_option函数， 第一个参数需要是<code>--name</code>，name用于之后调用的名字， 也是命令输入需要输入的名字。</p><p>可以设置帮助信息（help）和默认值（default）。</p><h2 id="4-解析输入"><a href="#4-解析输入" class="headerlink" title="4 解析输入"></a>4 解析输入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">options, args = parser.parse_args()</span><br></pre></td></tr></table></figure><p><code>parse_args()</code>函数有两个返回值，一个是指定的可选参数，一个是正常输入的所有参数。</p><p>其中可选参数可以通过<code>options.name</code>的方式调用得到该值。</p><h2 id="5-出错退出程序"><a href="#5-出错退出程序" class="headerlink" title="5 出错退出程序"></a>5 出错退出程序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.exit()</span><br></pre></td></tr></table></figure><p>可以传入参数<code>msg</code>来输出错误信息。执行该句之后程序退出。</p><h2 id="6-范例"><a href="#6-范例" class="headerlink" title="6 范例"></a>6 范例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_args</span><span class="params">()</span>:</span></span><br><span class="line">    usage = <span class="string">"""usage: %prog [options] poetry-file</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">This is the Slow Poetry Server, blocking edition.</span></span><br><span class="line"><span class="string">Run it like this:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  python slowpoetry.py &lt;path-to-poetry-file&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">If you are in the base directory of the twisted-intro package,</span></span><br><span class="line"><span class="string">you could run it like this:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  python blocking-server/slowpoetry.py poetry/ecstasy.txt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">to serve up John Donne's Ecstasy, which I know you want to do.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">    parser = optparse.OptionParser(usage)</span><br><span class="line"></span><br><span class="line">    help = <span class="string">"The port to listen on. Default to a random available port."</span></span><br><span class="line">    parser.add_option(<span class="string">'--port'</span>, type=<span class="string">'int'</span>, help=help)</span><br><span class="line"></span><br><span class="line">    help = <span class="string">"The interface to listen on. Default is localhost."</span></span><br><span class="line">    parser.add_option(<span class="string">'--iface'</span>, help=help, default=<span class="string">'localhost'</span>)</span><br><span class="line"></span><br><span class="line">    help = <span class="string">"The number of seconds between sending bytes."</span></span><br><span class="line">    parser.add_option(<span class="string">'--delay'</span>, type=<span class="string">'float'</span>, help=help, default=<span class="number">.7</span>)</span><br><span class="line"></span><br><span class="line">    help = <span class="string">"The number of bytes to send at a time."</span></span><br><span class="line">    parser.add_option(<span class="string">'--num-bytes'</span>, type=<span class="string">'int'</span>, help=help, default=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    options, args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> len(args) != <span class="number">1</span>:</span><br><span class="line">        parser.error(<span class="string">'Provide exactly one poetry file.'</span>)</span><br><span class="line"></span><br><span class="line">    poetry_file = args[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(args[<span class="number">0</span>]):</span><br><span class="line">        parser.error(<span class="string">'No such file: %s'</span> % poetry_file)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> options, poetry_file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    options, poetry_file= parse_args()</span><br><span class="line"></span><br><span class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">    sock.bind((options.iface, options.port <span class="keyword">or</span> <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Serving %s on port %s.'</span> % (poetry_file, sock.getsockname()[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    serve(sock, poetry_file, options.num_bytes, options.delay)</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> optparse </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>amazing trees-泽野弘之</title>
      <link href="/2018/10/27/amazing%20trees%20-%20%E6%B3%BD%E9%87%8E%E5%BC%98%E4%B9%8B/"/>
      <url>/2018/10/27/amazing%20trees%20-%20%E6%B3%BD%E9%87%8E%E5%BC%98%E4%B9%8B/</url>
      <content type="html"><![CDATA[<h2 id="平假名歌词"><a href="#平假名歌词" class="headerlink" title="平假名歌词"></a>平假名歌词</h2><p>僕はホコリだけの答えを見つけた顔しながら<br>ぼくはホコリ(hokori)だけのこたえを みつけたかおしながら</p><p>外で本当の言葉を置き忘れていたんだ<br>そとでほんとうのことばを おきわすれていたんだ</p><p>裏返しの過去に明かりを照らしてても<br>うらがえしのかこに　あかりをしょうらしてても</p><p>誤魔化したこれまでの声が横で目を覚ます<br>ごまかしたこれまでのこえが　おうでめをさます</p><p>走り出すのが 当たり前だったと うろ覚えなふりを<br>はしりたすのが　あたりまえだったと　うろおぼえなふりを</p><p>時に濡れた道の砂が靴の底に詰まる<br>ときに　ぬれた　みちの　すなが　くつの　そこに　つまる</p><p>振り落とせば出れる路地<br>ふりおとせば　でれるろじ</p><p>Getting me all upset I just wanna be free<br>I couldn’t!<br>Truth that I have been hiding, it’s so hard to see<br>You’ve been getting me all upset I have fallen too far!<br>I couldn’t grow the way I’ve been wanting<br>You know who you are!<br>We’re all amazing trees reaching up to the stars<br>Though we’re no longer children they sing in our hearts<br>We know the time that’s passing is not everlasting<br>Stop telling yourself the lies<br>I wanna change</p><p>それはずれた祈りをかわしまた後ろに近づく<br>それはずれたいのりをかわし またうしろにちかづく</p><p>あの日出逢った喜びを無邪気に掲げながら<br>あのひであったよろこびを　むじゃきにかかけながら</p><p>迷路に似たような怖さと期待の影<br>めいろににたような　こわさときたいのかげ</p><p>これが最後みたいな風通るのは街のせいじゃない<br>これがさいごみたいなかぜとおるのは　まちのせいじゃない</p><p>泣き出した日が 立つ未来選んだ スローペースと向き合う<br>なきだしたひが　たちつみらいえらんだ　スローペースとむきあう</p><p>焦る月が惑わす空で通り雨に打たれる<br>あせる　つきが　まどわす　そらで　とおり　あめに　うたれる</p><p>幼い日々が 直線を歌う<br>おさないひが　ちょくせんをうたう</p><p>Getting me all upset I just wanna be free<br>I couldn’t!<br>Truth that I have been hiding, it’s so hard to see<br>You’ve been getting me all upset I have fallen too far!<br>I couldn’t grow the way I’ve been wanting<br>You know who you are!<br>We’re all amazing trees reaching up to the stars<br>Though we’re no longer children they sing in our hearts<br>We know the time that’s passing is not everlasting<br>Stop telling yourself the lies<br>I wanna change<br>Amazing trees, amazing trees</p><p>空側に眺めた色は<br>そながわに　ながめたいろは</p><p>影さえ消えた雑じり気ないold &amp; new<br>かげさえきえた　まじりき(え?)ない　old &amp; new　</p><p>Getting me all upset I just wanna be free<br>I couldn’t!<br>Truth that I have been hiding, it’s so hard to see<br>You’ve been getting me all upset I have fallen too far!<br>I couldn’t grow the way I’ve been wanting<br>You know who you are!<br>We’re all amazing trees reaching up to the stars<br>Though we’re no longer children they sing in our hearts<br>We know the time that’s passing is not everlasting<br>Stop telling yourself the lies<br>I wanna change</p><h2 id="参考内容"><a href="#参考内容" class="headerlink" title="参考内容"></a>参考内容</h2><ul><li>歌词来源： <a href="http://j-lyric.net/artist/a05b956/l042861.html" target="_blank" rel="noopener">http://j-lyric.net/artist/a05b956/l042861.html</a></li><li>汉字翻译： <a href="https://kanji.jitenon.jp/" target="_blank" rel="noopener">https://kanji.jitenon.jp/</a></li><li>翻译： <a href="https://dictionary.goo.ne.jp/jn/" target="_blank" rel="noopener">https://dictionary.goo.ne.jp/jn/</a></li></ul>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World！</title>
      <link href="/2018/10/27/Helloworld/"/>
      <url>/2018/10/27/Helloworld/</url>
      <content type="html"><![CDATA[<p>国际惯例，第一篇送Hello World。</p><h2 id="1-此刻"><a href="#1-此刻" class="headerlink" title="1 此刻"></a>1 此刻</h2><p>每个人都有自己独特之处，或许在尝试某一件事情的时候， 你就会发现你或许比别人在这件事情上更加的游刃有余，或许是学的更快，或许是学得更牢。  </p><p>小时候，还记得我对文字的感受力，或许我记得不牢，但是我脑子里能突然浮现一下不曾接触的词语和概念。</p><p>那时我以为是潜移默化，也感叹人类的传承。  </p><p>时至今日，那样少有的灵性已经不再。 </p><p>更多的是，疲于奔命，安于现状。  </p><h2 id="2-习惯"><a href="#2-习惯" class="headerlink" title="2 习惯"></a>2 习惯</h2><p>我有一个不好的习惯， 总是我脑内限定的条件下执行某一件事情。</p><p>比如说我可能会需要一个更大的屏幕来显示，借此我才能够看到完整的一个网页，这样我就可以心满意足的去强化记忆网页当中的知识。</p><p>同样记笔记也是，我总是努力保证自己的笔记的格式是最好最清晰的， 这样才能方便我下次阅读。然而事实是由于我为了做到排版精致的笔记，可能会在同一个知识点上浪费过多的时间，且专注点还不在知识点上。后果就是我花了一些“无用”去完成熟记知识点的前提，效率甚低。最可怕的是，或许我会对自己的笔记产生厌恶，因而对阅读笔记毫无欲望…</p><h2 id="3-改变"><a href="#3-改变" class="headerlink" title="3 改变"></a>3 改变</h2><p>我知道，从很小就发现我和别人的脑回路不一样。</p><p>但是人始终是立足于社会的。我正努力改变自己，让自己更加适应社会，不显得那么突兀。</p><p>于是， 在改变前，我为自己又“谋划”了新的条件。</p><h2 id="4-520"><a href="#4-520" class="headerlink" title="4 520"></a>4 520</h2><p>很羡慕， 非常羡慕那些能够遇到志同道合，气味相投的另一半还幸福的在一起的人。</p><p>很遗憾，我曾经遇到过那样的人。不过理智告诉我，不是因为别人适合我，而是别人足够优秀。</p><p>但是遗憾的人生还要继续，还是微笑着努力变得优秀吧。</p><p>520，iMac，我给我自己送的礼物，希望我喜欢，希望我能迈出心里上的第一步。</p><h2 id="5-秘密"><a href="#5-秘密" class="headerlink" title="5 秘密"></a>5 秘密</h2><p>我有一个小秘密，我同样为自己“设立”了一个条件。</p><p>希望有一天我能说出来。</p>]]></content>
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>git进阶之git-flow</title>
      <link href="/2018/10/27/git-flow/"/>
      <url>/2018/10/27/git-flow/</url>
      <content type="html"><![CDATA[<h2 id="1-git-flow"><a href="#1-git-flow" class="headerlink" title="1 git flow"></a>1 git flow</h2><p>Git flow script是基于git flow概念的一个帮助我们快速使用该思想的脚本。</p><h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2 安装"></a>2 安装</h2><p>OS X<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git-flow</span><br></pre></td></tr></table></figure></p><p>Linux<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install git-flow</span><br></pre></td></tr></table></figure></p><p>Windows<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q -O - --no-check-certificate https://github.com/nvie/gitflow/raw/develop/contrib/gitflow-installer.sh | bash</span><br></pre></td></tr></table></figure></p><h2 id="3-使用"><a href="#3-使用" class="headerlink" title="3 使用"></a>3 使用</h2><p>初始化: git flow init</p><p>开始新Feature: git flow feature start MYFEATURE</p><p>Publish一个Feature(也就是push到远程): git flow feature publish MYFEATURE</p><p>获取Publish的Feature: git flow feature pull origin MYFEATURE</p><p>完成一个Feature: git flow feature finish MYFEATURE</p><p>开始一个Release: git flow release start RELEASE [BASE]</p><p>Publish一个Release: git flow release publish RELEASE<br>发布Release: git flow release finish RELEASE<br>别忘了git push –tags</p><p>开始一个Hotfix: git flow hotfix start VERSION [BASENAME]</p><p>发布一个Hotfix: git flow hotfix finish VERSION</p><h2 id="4-关于init"><a href="#4-关于init" class="headerlink" title="4 关于init"></a>4 关于init</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git flow init -h</span><br><span class="line"></span><br><span class="line">USAGE: git flow init [flags] args</span><br><span class="line">flags:</span><br><span class="line">  -h  show this <span class="built_in">help</span> (default: <span class="literal">false</span>)</span><br><span class="line">  -f  force setting of gitflow branches, even <span class="keyword">if</span> already configured</span><br><span class="line">      (default: <span class="literal">false</span>)</span><br><span class="line">  -d  use default branch naming conventions (default: <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><p>深入了解:</p><p>该配置写入到了 .git/cnfig 文件中, 如果发现该配置不正确, 可以直接进行编辑</p><h2 id="5-参考"><a href="#5-参考" class="headerlink" title="5 参考"></a>5 参考</h2><ul><li><a href="https://www.cnblogs.com/cnblogsfans/p/5075073.html" target="_blank" rel="noopener">https://www.cnblogs.com/cnblogsfans/p/5075073.html</a></li></ul>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> git </tag>
            
            <tag> git-flow </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SSH的一般配置</title>
      <link href="/2018/10/27/ssh%E9%85%8D%E7%BD%AE/"/>
      <url>/2018/10/27/ssh%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h2 id="config配置"><a href="#config配置" class="headerlink" title="config配置"></a>config配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host fd-git</span><br><span class="line">    Hostname git.finger.dance</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/weihc</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>yilia主题自定义</title>
      <link href="/2018/10/27/%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89/"/>
      <url>/2018/10/27/%E4%B8%BB%E9%A2%98%E8%87%AA%E5%AE%9A%E4%B9%89/</url>
      <content type="html"><![CDATA[<p>持续更新</p><h2 id="修改footer"><a href="#修改footer" class="headerlink" title="修改footer"></a>修改footer</h2><p>yilia/layout/_partial/footer.ejs</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer-info"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span></span><br><span class="line">        Stay hunger, stay young!</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="修改文章显示时间"><a href="#修改文章显示时间" class="headerlink" title="修改文章显示时间"></a>修改文章显示时间</h2><p>yilia/layout/_partial/post/date.ejs</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= date(post.date, date_format) %&gt;</span><br></pre></td></tr></table></figure><p>改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= date(post.date, &apos;YYYY-MM-DD HH:mm:ss&apos;) %&gt;</span><br></pre></td></tr></table></figure><p>代码参考</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Date / Time format</span><br><span class="line">## Hexo uses Moment.js to parse and display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">## http://momentjs.com/docs/#/displaying/format/</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br></pre></td></tr></table></figure><h2 id="首页文章标题对齐"><a href="#首页文章标题对齐" class="headerlink" title="首页文章标题对齐"></a>首页文章标题对齐</h2><p>yilia/source/main.0cf68a.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.article-inner</span> <span class="selector-tag">h1</span><span class="selector-class">.article-title</span>, <span class="selector-class">.article-title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#696969</span>;</span><br><span class="line">  <span class="comment">/* margin-left: 0px; */</span></span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: color <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">-moz-transition</span>: color <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">-o-transition</span>: color <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">transition</span>: color <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="标题加入背景色"><a href="#标题加入背景色" class="headerlink" title="标题加入背景色"></a>标题加入背景色</h2><p>yilia/source/main.0cf68a.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.article-header</span>&#123;<span class="attribute">border-left</span>:<span class="number">5px</span> solid <span class="number">#4d4d4d</span>;<span class="attribute">background-color</span>: <span class="number">#d5d8d9</span>;<span class="attribute">padding</span>:<span class="number">30px</span> <span class="number">0</span> <span class="number">15px</span> <span class="number">25px</span>;<span class="attribute">padding-left</span>:<span class="number">7.6923%</span>&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 主题 </tag>
            
            <tag> 自定义 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>gitlab的基本配置</title>
      <link href="/2018/10/27/gitlab/"/>
      <url>/2018/10/27/gitlab/</url>
      <content type="html"><![CDATA[<h2 id="1-设置账户和邮件"><a href="#1-设置账户和邮件" class="headerlink" title="1 设置账户和邮件"></a>1 设置账户和邮件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name weihuchao</span><br><span class="line">git config --global user.email weihuchao@xuetangx.com</span><br></pre></td></tr></table></figure><p>设置存储<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure></p><h2 id="2-配置ssh-key"><a href="#2-配置ssh-key" class="headerlink" title="2 配置ssh-key"></a>2 配置ssh-key</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &apos;weihuchao@xuetangx.com&apos;</span><br></pre></td></tr></table></figure><p>生成的文件在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure></p><p>将内容复制到SSH keys里</p>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/2018/10/27/git%E5%92%8Cgithub%E5%92%8Cgitlab%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2018/10/27/git%E5%92%8Cgithub%E5%92%8Cgitlab%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      <content type="html"><![CDATA[<h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><p>git 是一种开源的版本控制系统，可以高效的管理项目版本。同时也是一个版本控制软件。</p><h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><p>GitHub 是一个面向开源及私有软件项目的托管平台。GitHub可以托管各种Git库，并提供web界面。</p><p>也就是说大众可以使用的, 且企业可以定制的。</p><h2 id="GitLab"><a href="#GitLab" class="headerlink" title="GitLab"></a>GitLab</h2><p>GitLab 是一个用于仓库管理系统的开源项目，使用git进行代码管理工具，可以自己搭建GitLab仓库服务器</p><p>企业自己搭建的一个git仓库使用的技术。</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Hexo博客的构建之路</title>
      <link href="/2018/10/27/Hexo%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%9E%84%E5%BB%BA/"/>
      <url>/2018/10/27/Hexo%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%9E%84%E5%BB%BA/</url>
      <content type="html"><![CDATA[<h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1 介绍"></a>1 介绍</h2><p>hexo是基于node.js的。</p><p>它可用于创建博客， 且操作十分方便。</p><p>也可以和github关联，提交上自动生成的静态文件，配置之后任何人都可以轻松访问创建好的博客了。</p><p>地址不够酷炫没关系，购买一个域名来绑定给我们的博客。</p><p>页面不够酷炫没关系，还有一大波的主题等着我们应用。</p><h2 id="2-安装Hexo"><a href="#2-安装Hexo" class="headerlink" title="2 安装Hexo"></a>2 安装Hexo</h2><ol><li><p>安装node.js</p><p><a href="http://nodejs.cn/" target="_blank" rel="noopener">http://nodejs.cn/</a></p></li></ol><ol start="2"><li><p>安装hexo</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure></li><li><p>初始化hexo</p><p>注意这会在当前目录下生成hexo所需的内容，所以选定好一个合适的位置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>(可选) 安装hexo的插件</p><p>虽然是可选但是安装完之后不会报一些因为缺插件导致的错误<br>比如缺少<strong>hexo-deployer-git</strong>在<strong>hexo d</strong>的时候就会找不到git</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-deployer-heroku --save</span><br><span class="line">npm install hexo-deployer-rsync --save</span><br><span class="line">npm install hexo-deployer-openshift --save</span><br><span class="line">npm install hexo-renderer-marked@0.2 --save</span><br><span class="line">npm install hexo-renderer-stylus@0.2 --save</span><br><span class="line">npm install hexo-generator-feed@1 --save</span><br><span class="line">npm install hexo-generator-sitemap@1 --save</span><br></pre></td></tr></table></figure></li></ol><ol start="5"><li><p>启动hexo查看效果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>g对应的是generate<br>s对应的是server<br>执行之后就可以访问<strong> <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> </strong>查看效果了</p></li></ol><h2 id="3-添加文章"><a href="#3-添加文章" class="headerlink" title="3 添加文章"></a>3 添加文章</h2><p>可以直接在项目<strong>/source/_posts</strong> 下直接创建需要的md文件即可<br>注意：md文件头部需要有一下信息， 来配置文章的标题、创建时间、tag、分类等内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 我是标题</span><br><span class="line">categories: 我是分类</span><br><span class="line">tags:</span><br><span class="line">- 我是tag</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="4-创建关于我"><a href="#4-创建关于我" class="headerlink" title="4 创建关于我"></a>4 创建关于我</h2><ol><li><p>在项目路径下执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;about&quot;</span><br></pre></td></tr></table></figure><p>实际上就是生成了 <strong>项目/source/about/index.md</strong> 文件</p></li></ol><ol start="2"><li>编辑index.md文件的内容</li></ol><ol start="3"><li><p>修改 <strong>项目/themes/next/_config.yml</strong> 文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  about: /about/ || user        # 去掉这个位置的注释就可以了</span><br><span class="line">#  tags: /tags/ || tags</span><br><span class="line">  categories: /categories/ || th</span><br><span class="line">  archives: /archives/ || archive</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-创建分类"><a href="#5-创建分类" class="headerlink" title="5 创建分类"></a>5 创建分类</h2><ol><li><p>在项目中执行命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;categories&quot;</span><br></pre></td></tr></table></figure><p>同样，会创建 <strong>项目/source/categories/index.md</strong> 文件</p></li></ol><ol start="2"><li><p>修改index.md文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2018-03-31 16:24:24</span><br><span class="line">type: categories</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>其中需要title的内容会被显示到页面<br>type必须要加上， 这样Hexo才会自动生成分类的内容</p></li></ol><ol start="3"><li>和创建关于我一样，需要修改配置文件</li></ol><h2 id="6-与gitbu关联"><a href="#6-与gitbu关联" class="headerlink" title="6 与gitbu关联"></a>6 与gitbu关联</h2><ol><li>获取git账号</li></ol><ol start="2"><li>创建一个repository<br>注意名字必须是<strong> 你的github用户.github.io </strong></li></ol><ol start="3"><li><p>在本地配置好git</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;whims&quot;</span><br><span class="line">git config --global user.email &quot;whimswei@163.com&quot;</span><br></pre></td></tr></table></figure></li><li><p>创建SSH秘钥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh</span><br><span class="line">ssh-keygen -t rsa -C “whimswei@163.com”</span><br><span class="line">cat id_rsa.pub</span><br></pre></td></tr></table></figure></li></ol><ol start="5"><li><p>添加到git上</p><p>头像 -&gt; setting -&gt; SSH and GPG keys  -&gt; new SSH key  -&gt; Title自己定，Key输入id_rsa.pub的内容</p></li></ol><ol start="6"><li><p>配置hexo</p><p>配置项目/_config.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: 仓库地址</span><br><span class="line">  branch: 分支（一般是master）</span><br></pre></td></tr></table></figure></li><li><p>推送到git</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>d对应deploy</p></li></ol><h2 id="7-绑定域名"><a href="#7-绑定域名" class="headerlink" title="7 绑定域名"></a>7 绑定域名</h2><ol><li><p>本地项目的修改</p><p>创建文件 /source/CNAME</p><p>内容为域名</p></li></ol><ol start="2"><li><p>git上的修改</p><p>头像 -&gt; your profile -&gt; 项目 -&gt; setting -&gt; GitHub Pages -&gt; Custom domain </p><p>输入域名</p></li></ol><h2 id="8-（主题）Favicon"><a href="#8-（主题）Favicon" class="headerlink" title="8 （主题）Favicon"></a>8 （主题）Favicon</h2><ol><li>用小篆字体， <a href="http://www.dullr.com/11" target="_blank" rel="noopener">推荐网站</a></li></ol><ol start="2"><li>地址为 /source/favicon.jpg</li></ol><ol start="3"><li><p>对应主题配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">favicon: /favicon.jpg</span><br></pre></td></tr></table></figure></li></ol><h2 id="9-（主题）Share页面的配置"><a href="#9-（主题）Share页面的配置" class="headerlink" title="9 （主题）Share页面的配置"></a>9 （主题）Share页面的配置</h2><p>文件位置为/layout/_partial/post/share.ejs</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bdsharebuttonbox"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"&gt;&lt;/a&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"&gt;&lt;/a&gt;--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"fa fa-weixin bds_weixin"</span> <span class="attr">data-cmd</span>=<span class="string">"weixin"</span> <span class="attr">title</span>=<span class="string">"生成文章二维码"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"fa fa-qq bds_sqq"</span> <span class="attr">data-cmd</span>=<span class="string">"sqq"</span> <span class="attr">title</span>=<span class="string">"分享给 QQ 好友"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"fa fa fa-envelope-o bds_mail"</span> <span class="attr">data-cmd</span>=<span class="string">"mail"</span> <span class="attr">title</span>=<span class="string">"通过邮件分享"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"fa fa-files-o bds_copy"</span> <span class="attr">data-cmd</span>=<span class="string">"copy"</span> <span class="attr">title</span>=<span class="string">"复制网址"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;a href="#" class="fa fa-share-alt bds_more" data-cmd="more"&gt;&lt;/i&gt;&lt;/a&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="10-（主题）页底优化"><a href="#10-（主题）页底优化" class="headerlink" title="10 （主题）页底优化"></a>10 （主题）页底优化</h2><p>文件位置/layout/_partial/footer.ejs</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer-info"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer-left"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-copyright"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                &lt;% if (theme.since &amp;&amp; !isNaN(theme.since) &amp;&amp; theme.since &lt; date(new Date(), 'YYYY')) &#123; %&gt;&lt;%- theme.since%&gt;-&lt;% &#125; %&gt;&lt;%= date(new Date(), 'YYYY') %&gt; &lt;%= config.author || config.title %&gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;div class="footer-right"&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--&lt;a href="http://hexo.io/" target="_blank" title="&lt;%= __('tooltip.Hexo') %&gt;"&gt;Hexo&lt;/a&gt;  Theme &lt;a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="&lt;%= __('tooltip.Yelee') %&gt;  v&lt;%= theme.Yelee %&gt;"&gt;Yelee&lt;/a&gt; by MOxFIVE &lt;i class="fa fa-heart animated infinite pulse"&gt;&lt;/i&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;/div&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;% if (theme.visit_counter.on) &#123; %&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;div class="visit"&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--&lt;% if (theme.visit_counter.site_visit) &#123; %&gt;--&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--&lt;span id="busuanzi_container_site_pv" style='display:none'&gt;--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--&lt;span id="site-visit" title="&lt;%= __('visit_counter.site') %&gt;"&gt;&lt;i class="fa fa-user" aria-hidden="true"&gt;&lt;/i&gt;&lt;span id="busuanzi_value_site_uv"&gt;&lt;/span&gt;--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--&lt;/span&gt;--&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--&lt;/span&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--&lt;% &#125; %&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--&lt;% if (theme.visit_counter.site_visit &amp;&amp; theme.visit_counter.page_visit) &#123; %&gt;--&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--&lt;span&gt;| &lt;/span&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--&lt;% &#125; %&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--&lt;% if (theme.visit_counter.page_visit) &#123; %&gt;--&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--&lt;span id="busuanzi_container_page_pv" style='display:none'&gt;--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--&lt;span id="page-visit"  title="&lt;%= __('visit_counter.page') %&gt;"&gt;&lt;i class="fa fa-eye animated infinite pulse" aria-hidden="true"&gt;&lt;/i&gt;&lt;span id="busuanzi_value_page_pv"&gt;&lt;/span&gt;--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--&lt;/span&gt;--&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--&lt;/span&gt;--&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--&lt;% &#125; %&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;/div&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;% &#125; %&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="11-更多内容"><a href="#11-更多内容" class="headerlink" title="11 更多内容"></a>11 更多内容</h2><ul><li><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">HEXO官方中文文档</a></li><li><a href="https://hexo.io/themes/" target="_blank" rel="noopener">HEXO主题</a></li><li><a href="http://moxfive.xyz/yelee/1.Getting-Started/" target="_blank" rel="noopener">主题文档</a></li><li>推荐主题<ul><li><a href="https://vevlins.github.io/" target="_blank" rel="noopener">https://vevlins.github.io/</a></li><li><a href="https://blog.meiqiu.me/2017/12/18/mysql-tips/" target="_blank" rel="noopener">https://blog.meiqiu.me/2017/12/18/mysql-tips/</a></li><li><a href="http://hejx.space/" target="_blank" rel="noopener">http://hejx.space/</a></li><li><a href="http://www.yujunren.com/blog/" target="_blank" rel="noopener">http://www.yujunren.com/blog/</a></li><li><a href="https://hcyue.me/" target="_blank" rel="noopener">https://hcyue.me/</a></li><li><a href="https://geekplux.com/" target="_blank" rel="noopener">https://geekplux.com/</a></li></ul></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>自此就完成了一个可以快捷发表文章，任何人可以通过指定域名访问， 界面美观大方的博客网站。</p><p>接下来就是熟悉Markdown的语法，把文章的布局格式控制的更加精确，还有学习一些前端知识对页面进行改良甚至做成模板供大家使用，最终就是努力学习写出更好的博客内容。</p>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 博客 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker初步了解和使用</title>
      <link href="/2018/09/19/docker/"/>
      <url>/2018/09/19/docker/</url>
      <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>是一个开源的应用容器引擎。</p><p>打包应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://get.docker.com/ | sh</span><br><span class="line"># 改地址下载的是一个shell脚本，可以将其管道给shell让其直接执行</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install linux-image-extra-$(uname -r) linux-image-extra-virtual</span><br><span class="line"># 注意这个$(uname -r)， 事实上uname -r是一个命令， 会返回系统内核版本，$包裹表示取得这个值放在这使用， 类似于eval。</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> server </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>正向代理和反向代理</title>
      <link href="/2018/09/19/%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"/>
      <url>/2018/09/19/%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/</url>
      <content type="html"><![CDATA[<h2 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h2><p>客户端和代理处于同一个局域网（也不全是），客户端连接到代理，代理直接访问服务端的情况。</p><h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><p>客户端直接访问代理，该代理对于客户端来说就是访问的目标，然后该代理依据访问的内容等因素，根据配置，选择在身后的合适的服务端，请求服务端，然后将服务端返回的内容返回给客户端。</p><p>一般来说，该代理和服务端处于一个局域网。</p><h2 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h2><p>通过局域网判断：</p><ul><li>正向代理： 客户端和代理处于一个局域网</li><li>反向代理： 服务端和代理处于一个局域网</li></ul><p><img src="http://pic1.zhimg.com/80/480c1c45d2565e2f92fd930d25b73a18_hd.jpg" alt="图1"></p><p>通过对应关系判断：</p><ul><li>正向代理： 客户端-代理-服务端是 N:1:1 的关系</li><li>反向代理： 客户端-代理-服务端是 1:1:N 的关系</li></ul><p><img src="http://pic4.zhimg.com/80/2582ac2a1366e3e12acf274265ea80f3_hd.jpg" alt="图2"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>博客：<a href="https://www.cnblogs.com/Anker/p/6056540.html" target="_blank" rel="noopener">https://www.cnblogs.com/Anker/p/6056540.html</a></li><li>知乎：<a href="https://www.zhihu.com/question/24723688" target="_blank" rel="noopener">https://www.zhihu.com/question/24723688</a></li></ul>]]></content>
      
      <categories>
          
          <category> server </category>
          
      </categories>
      
      
        <tags>
            
            <tag> server </tag>
            
            <tag> 代理 </tag>
            
            <tag> 反向代理 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>面试进程线程协程两三语</title>
      <link href="/2018/09/18/%E9%9D%A2%E8%AF%95%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%8D%8F%E7%A8%8B%E4%B8%A4%E4%B8%89%E8%AF%AD/"/>
      <url>/2018/09/18/%E9%9D%A2%E8%AF%95%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E5%8D%8F%E7%A8%8B%E4%B8%A4%E4%B8%89%E8%AF%AD/</url>
      <content type="html"><![CDATA[<h2 id="1-协程"><a href="#1-协程" class="headerlink" title="1 协程"></a>1 协程</h2><h3 id="1-1-协程是什么"><a href="#1-1-协程是什么" class="headerlink" title="1.1 协程是什么"></a>1.1 协程是什么</h3><p>协程是在线程之上由“用户”构建的并发单元，操作系统不感知协程，协程的切换由用户自己管理和调度。</p><h3 id="1-2-协程的好处"><a href="#1-2-协程的好处" class="headerlink" title="1.2 协程的好处"></a>1.2 协程的好处</h3><ol><li><p>协程极大的优化了程序员的编程体验，同步编程风格能快速构建模块，并易于复用，而且有异步的性能(这个看具体库的实现)，也不用陷入callback hell的深坑。</p></li><li><p>第二点也是我最近一直在纠结的一点，协程到底有没有性能提升？</p></li></ol><p>1)从多线程同步模型切到协程来看，首先很明确的性能提升点在于同步到异步的切换，libco中把阻塞的点全部放到了epoll线程中，而协程线程并不会发生阻塞。<br>其次是协程的成本比线程小，线程受栈空间限制，而协程的栈空间由用户控制，而且实现协程需要的辅助数据结构很少，占用的内存少，那么就会有更大的容量，比如可以轻松开10w个协程，但是很难说开10w个线程。<br>另外一个问题是很多人拿线程上下文切换比协程上下文切换开销大来推出协程模型比多线程并发模型性能优这点，这个问题我纠结了很久。<br>对于这个问题，我先做一个简单的具体抽象：在不考虑阻塞的情况下，假设8核的cpu，不考虑抢占中断优先级等因素，100个任务并发执行，100个线程并发和10个线程每个线程10个协程并发对比两者都可以把cpu资源利用起来，<br>对OS来说，前者100个线程参与cpu调度，后者10个线程参与cpu调度，后者还有额外的协程切换调度，先考虑线程切换的上下文，根据Linux内核调度器CFS的算法，每个线程拿到的时间片是动态的，<br>进程数在分配的时间片在可变区间的情况下会直接影响到线程时间片的长短，所以100个线程每个线程的时间片在一定条件下会要比10个线程情况下的要短，也就意味着在相同时间里，前者的上下文切换次数是比后者要多的，</p><p>所以可以得出一个结论：协程并发模型比多线程同步模型在一定条件下会减少线程切换次数（时间片有固定的范围，如果超出这个范围的边界则线程的时间片无差异），增加了协程切换次数，由于协程的切换是由程序员自己调度的，<br>所以很难说协程切换的代价比省去的线程切换代价小，合理的方式应该是通过测试工具在具体的业务场景得出一个最好的平衡点。</p><p>2)从异步回调模型切到协程模型来看，从一些已有协程库的实现来看，协程的同步写法却有异步性能其实还是异步回调在支撑这个事情，所以我认为协程模型是在异步模型之上的东西，<br>考虑到本身协程上下文切换的开销（其实很小）和数据结构调用的一些开销，理论上协程是比异步回调的性能要稍微差一点，但是可以处于几乎持平的性能，因为协程实现的代价非常小。</p><p>3)从一些异步驱动库的角度来看协程的话，因为异步框架把代码封装到很多个小类里面，然后串起来，这中间会涉及相当多的内存分配，而数据大都在离散的堆内存里面，而协程风格的代码，<br>可以简单理解为一个简洁的连续空间的栈内存池，辅助数据结构也很少，所以协程可能会比厚重的封装性能会更好一些，但是这里的前提是，协程库能实现异步驱动库所需要的功能，并把它封装到同步调用里。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li>协程的理解 <a href="https://www.cnblogs.com/laiy/p/coroutine.html" target="_blank" rel="noopener">https://www.cnblogs.com/laiy/p/coroutine.html</a></li></ul>]]></content>
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 线程 </tag>
            
            <tag> 进程 </tag>
            
            <tag> 协程 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>安装mysql依赖</title>
      <link href="/2018/09/18/%E5%AE%89%E8%A3%85mysql%E4%BE%9D%E8%B5%96/"/>
      <url>/2018/09/18/%E5%AE%89%E8%A3%85mysql%E4%BE%9D%E8%B5%96/</url>
      <content type="html"><![CDATA[<p>在运行Django项目的时候可能会需要mysql环境。</p><h2 id="mysqlclient"><a href="#mysqlclient" class="headerlink" title="mysqlclient"></a>mysqlclient</h2><p>这是用于python3的库。</p><p>安装方法：</p><p>安装依赖</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql-connector-c</span><br></pre></td></tr></table></figure><p>mac上需要修改 mysql_config<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ mysql_config</span><br><span class="line">Usage: /usr/local/bin/mysql_config [OPTIONS]</span><br><span class="line"></span><br><span class="line">➜  ~ ll /usr/local/bin/mysql_config</span><br><span class="line">lrwxr-xr-x  1 weihuchao  admin    51B  9 18 18:10 /usr/local/bin/mysql_config -&gt; ../Cellar/mysql-connector-c/6.1.11/bin/mysql_config</span><br><span class="line"></span><br><span class="line">➜  ~ cd /usr/local/Cellar/mysql-connector-c/6.1.11/bin/</span><br><span class="line"></span><br><span class="line">➜  bin ll</span><br><span class="line">total 14176</span><br><span class="line">-r-xr-xr-x  1 weihuchao  staff   3.4M  9 18 18:10 my_print_defaults</span><br><span class="line">-r-xr-xr-x  1 weihuchao  staff   4.7K  9 18 18:26 mysql_config</span><br><span class="line">-r-xr-xr-x  1 weihuchao  staff   3.5M  9 18 18:10 perror</span><br><span class="line"></span><br><span class="line">➜  bin sudo chmod a+x mysql_config</span><br></pre></td></tr></table></figure></p><p>修改文件112行左右<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Create options</span><br><span class="line">libs=&quot;-L$pkglibdir&quot;</span><br><span class="line">libs=&quot;$libs -l &quot;</span><br></pre></td></tr></table></figure></p><p>改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Create options</span><br><span class="line">libs=&quot;-L$pkglibdir&quot;</span><br><span class="line">libs=&quot;$libs -lmysqlclient -lssl -lcrypto&quot;</span><br></pre></td></tr></table></figure><p>最后安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install mysqlclient</span><br></pre></td></tr></table></figure></p><h2 id="MySQL-python"><a href="#MySQL-python" class="headerlink" title="MySQL-python"></a>MySQL-python</h2><p>这个主要是用于python2中。</p><p>安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install MySQL-python==1.2.5</span><br></pre></td></tr></table></figure><h2 id="参考地址"><a href="#参考地址" class="headerlink" title="参考地址"></a>参考地址</h2><ul><li><p>mysqlclient <a href="https://pypi.org/project/mysqlclient/" target="_blank" rel="noopener">https://pypi.org/project/mysqlclient/</a></p></li><li><p>MySQL-python <a href="https://pypi.org/project/MySQL-python/1.2.5/" target="_blank" rel="noopener">https://pypi.org/project/MySQL-python/1.2.5/</a></p></li></ul>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 环境 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python主流web框架对比</title>
      <link href="/2018/09/18/python%E4%B8%BB%E6%B5%81web%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94/"/>
      <url>/2018/09/18/python%E4%B8%BB%E6%B5%81web%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94/</url>
      <content type="html"><![CDATA[<h2 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h2><p>Django框架”大而全”。</p><p>内置ORM有很多便利操作。由于功能比较全，可以在框架很多地方很便利的使用。</p><p>模板也与众不同，都有自己特定的语法。在模板上进行代码操作的空间比较小。</p><h2 id="Tornado"><a href="#Tornado" class="headerlink" title="Tornado"></a>Tornado</h2><p>Tornado是一个轻量级框架，”少而精”。</p><p>模板、ORM等都只是简单的功能。</p><p>注重性能优越，速度快</p><p>解决高并发</p><p>异步非阻塞</p><p>websockets 长连接</p><p>内嵌了HTTP服务器</p><p>单线程的异步网络程序，默认启动时根据CPU数量运行多个实例；利用CPU多核的优势。</p><p>请求处理是基于回调的非阻塞调用，这样能提高并发量。 模板和数据库部分有很多第三方的模块可供选择，这样不利于封装为一个功能模块。</p>]]></content>
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> web框架 </tag>
            
            <tag> Django </tag>
            
            <tag> Tornado </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>网络编程理论</title>
      <link href="/2018/09/16/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%90%86%E8%AE%BA/"/>
      <url>/2018/09/16/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%90%86%E8%AE%BA/</url>
      <content type="html"><![CDATA[<h2 id="1-客户端服务端架构"><a href="#1-客户端服务端架构" class="headerlink" title="1 客户端服务端架构"></a>1 客户端服务端架构</h2><p>该架构指的是，对于客户端来说，请求服务器得到请求响应的内容，而对于服务端来说就是要不断接受客户端的请求并给予反馈。</p><h2 id="2-套接字"><a href="#2-套接字" class="headerlink" title="2 套接字"></a>2 套接字</h2><h3 id="2-1-基本概念"><a href="#2-1-基本概念" class="headerlink" title="2.1 基本概念"></a>2.1 基本概念</h3><p>网络化的程序在开始任何通讯之前都需要创建套接字。</p><p>是<strong>通信端点</strong>这一概念在计算机网络的数据结构。</p><p>起源于BSD Linux，因此有叫BSD套接字。</p><p>一台主机多个应用的通信， 叫做<strong>进程间的通信IPC</strong>。</p><h3 id="2-2-套接字分类"><a href="#2-2-套接字分类" class="headerlink" title="2.2 套接字分类"></a>2.2 套接字分类</h3><p>套接字有两种：</p><ul><li>基于文件型；</li><li>基于网络型；</li></ul><p>套接字家族。套接字的不同类型的一个集合。有套接字家族名字。</p><p>常见的文件型套接字家族，家族名为<strong>AF_UNIX</strong>。</p><p>常见的网络型套接字家族，家族名为<strong>AF_INET</strong>。</p><h3 id="2-3-套接字的类型"><a href="#2-3-套接字的类型" class="headerlink" title="2.3 套接字的类型"></a>2.3 套接字的类型</h3><p>套接字类型有两种：</p><ul><li>面向连接的套接字</li><li>无连接的套接字</li></ul><p>面向连接的套接字基于TCP，类型为<strong>SOCKET_STREAM</strong>。</p><p>无连接的套接字基于UDP，类型为<strong>SOCKET_DGRAM</strong>（datagram）。</p><p>由于这些套接字通过IP协议来查找主机，因此分别组成系统<strong>TCP/IP</strong>和<strong>UDP/IP</strong>。</p>]]></content>
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 网络编程 </tag>
            
            <tag> TCP </tag>
            
            <tag> UDP </tag>
            
            <tag> 套接字 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mac使用</title>
      <link href="/2018/09/08/mac%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/09/08/mac%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h2 id="安装pip"><a href="#安装pip" class="headerlink" title="安装pip"></a>安装pip</h2><p>mac自带python2.7， 但是没有安装pip， 安装如下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo easy_install pip</span><br></pre></td></tr></table></figure><h2 id="安装ipython"><a href="#安装ipython" class="headerlink" title="安装ipython"></a>安装ipython</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install ipython</span><br></pre></td></tr></table></figure><h3 id="安装pyv8"><a href="#安装pyv8" class="headerlink" title="安装pyv8"></a>安装pyv8</h3><p>报错v8.h<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In file included from src/Exception.cpp:1:</span><br><span class="line">src/Exception.h:6:10: fatal error: &apos;v8.h&apos; file not found</span><br><span class="line">#include &lt;v8.h&gt;</span><br><span class="line">         ^~~~~~</span><br><span class="line">1 error generated.</span><br><span class="line">error: command &apos;gcc&apos; failed with exit status 1</span><br><span class="line"></span><br><span class="line">----------------------------------------</span><br></pre></td></tr></table></figure></p><p>安装v8</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install v8</span><br></pre></td></tr></table></figure><p>可能还需要安装boost</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install boost</span><br></pre></td></tr></table></figure><p>github地址</p><p><a href="https://github.com/emmetio/pyv8-binaries" target="_blank" rel="noopener">https://github.com/emmetio/pyv8-binaries</a></p><p>下载好对应的安装版本之后， 直接解压到site-packages目录下。</p><p>当前python3的site-packages目录为:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/</span><br></pre></td></tr></table></figure><p>直接使用pyv8</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import PyV8</span><br></pre></td></tr></table></figure><h2 id="pycharm自动安装报错"><a href="#pycharm自动安装报错" class="headerlink" title="pycharm自动安装报错"></a>pycharm自动安装报错</h2><p>如果报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AttributeError: module &apos;pip&apos; has no attribute &apos;main&apos;</span><br></pre></td></tr></table></figure></p><p>修改安装包下的 /Applications/PyCharm.app/Contents/helpers/packaging_tool.py</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">def do_install(pkgs):</span><br><span class="line">    try:</span><br><span class="line">        # import pip</span><br><span class="line">        try:</span><br><span class="line">            from pip._internal import main</span><br><span class="line">        except Exception:</span><br><span class="line">            from pip import main</span><br><span class="line">    except ImportError:</span><br><span class="line">        error_no_pip()</span><br><span class="line">    # return pip.main([&apos;install&apos;] + pkgs)</span><br><span class="line">    return main([&apos;install&apos;] + pkgs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def do_uninstall(pkgs):</span><br><span class="line">    try:</span><br><span class="line">        # import pip</span><br><span class="line">        try:</span><br><span class="line">            from pip._internal import main</span><br><span class="line">        except Exception:</span><br><span class="line">            from pip import main</span><br><span class="line">    except ImportError:</span><br><span class="line">        error_no_pip()</span><br><span class="line">    # return pip.main([&apos;uninstall&apos;, &apos;-y&apos;] + pkgs)</span><br><span class="line">    return main([&apos;uninstall&apos;, &apos;-y&apos;] + pkgs)</span><br></pre></td></tr></table></figure><h2 id="下载subline"><a href="#下载subline" class="headerlink" title="下载subline"></a>下载subline</h2><p>地址：</p><p><a href="http://www.sublimetext.com/3" target="_blank" rel="noopener">http://www.sublimetext.com/3</a></p>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python拾遗</title>
      <link href="/2018/09/01/python%E6%8B%BE%E9%81%97/"/>
      <url>/2018/09/01/python%E6%8B%BE%E9%81%97/</url>
      <content type="html"><![CDATA[<h2 id="1-输入输出"><a href="#1-输入输出" class="headerlink" title="1 输入输出"></a>1 输入输出</h2><p><code>print()</code>函数可以传入多个参数，多个参数以空格分割</p><p><code>input()</code>函数表示输入，将输入的内容作为返回值， 类型是字符串。</p><h2 id="2-数据类型"><a href="#2-数据类型" class="headerlink" title="2 数据类型"></a>2 数据类型</h2><p>字符串的单引号和双引号的转移由<strong>\</strong>完成。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'I\'m \"OK\"!'</span>)</span><br><span class="line">I<span class="string">'m "OK"!</span></span><br></pre></td></tr></table></figure><h2 id="3-字符编码问题"><a href="#3-字符编码问题" class="headerlink" title="3 字符编码问题"></a>3 字符编码问题</h2><p>Python2好Python3有重大区别</p><h3 id="3-1-Python3"><a href="#3-1-Python3" class="headerlink" title="3.1 Python3"></a>3.1 Python3</h3><h4 id="part-one"><a href="#part-one" class="headerlink" title="part one"></a>part one</h4><p>字符串是以Unicode编码的</p><p>也就是说，在程序输入过程中， 默认支持带格式的内容或者Unicode编码内容。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'包含中文的str'</span>)</span><br><span class="line">包含中文的str</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'\u4e2d\u6587'</span></span><br><span class="line"><span class="string">'中文'</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'包含\u4e2d\u6587的str'</span>)</span><br><span class="line">包含中文的str</span><br></pre></td></tr></table></figure><p>相关内置函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'A'</span>)</span><br><span class="line"><span class="number">65</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'中'</span>)</span><br><span class="line"><span class="number">20013</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">66</span>)</span><br><span class="line"><span class="string">'B'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">25991</span>)</span><br><span class="line"><span class="string">'文'</span></span><br></pre></td></tr></table></figure><h4 id="part-two"><a href="#part-two" class="headerlink" title="part two"></a>part two</h4><p>如果涉及网络传输或者保存到文件， 会将str变为以字节为单位的bytes。</p><p>bytes的每个字符都只占用一个字节。</p><p>str在内存中以Unicode表示，一个字符对应若干个字节。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="string">'ABC'</span>   <span class="comment"># str</span></span><br><span class="line">x = <span class="string">b'ABC'</span>  <span class="comment"># bytes</span></span><br></pre></td></tr></table></figure><p>str转换成bytes是用函数<code>encode()</code>， 需要传入编码类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'ABC'</span>.encode(<span class="string">'ascii'</span>)</span><br><span class="line"><span class="string">b'ABC'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'中文'</span>.encode(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="string">b'\xe4\xb8\xad\xe6\x96\x87'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'中文'</span>.encode(<span class="string">'ascii'</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 0-1: ordinal not in range(128)</span></span><br></pre></td></tr></table></figure><p>bytes转化为str使用函数<code>decode()</code>， 需要传入编码类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">b'ABC'</span>.decode(<span class="string">'ascii'</span>)</span><br><span class="line"><span class="string">'ABC'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">b'\xe4\xb8\xad\xe6\x96\x87'</span>.decode(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="string">'中文'</span></span><br></pre></td></tr></table></figure><p>附带参数可以忽略错误， <code>errors=&#39;ignore&#39;</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">b'\xe4\xb8\xad\xff'</span>.decode(<span class="string">'utf-8'</span>, errors=<span class="string">'ignore'</span>)</span><br><span class="line"><span class="string">'中'</span></span><br></pre></td></tr></table></figure><h3 id="3-2-Python2"><a href="#3-2-Python2" class="headerlink" title="3.2 Python2"></a>3.2 Python2</h3><p>python默认的字符是经过编码好的字符。</p><p>要显式生成未经过编码的unicode需要在字符前面加u字符。</p><p>python2和3默认定义的字符串类型都是str。</p><p>python3字符串str编码之后会变成bytes类型。</p><p>python2字符串str编码之后会变成unicode类型，因为是解码。</p><h2 id="4-函数"><a href="#4-函数" class="headerlink" title="4 函数"></a>4 函数</h2><h3 id="4-1-函数参数"><a href="#4-1-函数参数" class="headerlink" title="4.1 函数参数"></a>4.1 函数参数</h3><h4 id="4-1-1-位置参数"><a href="#4-1-1-位置参数" class="headerlink" title="4.1.1 位置参数"></a>4.1.1 位置参数</h4><h4 id="4-1-2-默认参数"><a href="#4-1-2-默认参数" class="headerlink" title="4.1.2 默认参数"></a>4.1.2 默认参数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">apd</span><span class="params">(L=[])</span>:</span></span><br><span class="line">        L.append(<span class="string">"end"</span>)</span><br><span class="line">        <span class="keyword">return</span> L</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>apd([<span class="number">1</span>])</span><br><span class="line">[<span class="number">1</span>, <span class="string">'end'</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>apd()</span><br><span class="line">[<span class="string">'end'</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>apd()</span><br><span class="line">[<span class="string">'end'</span>, <span class="string">'end'</span>]</span><br></pre></td></tr></table></figure><p>解释原因为： Python函数的默认参数在<strong>函数定义的时候已经生成了</strong>。</p><h4 id="4-1-3-可变参数"><a href="#4-1-3-可变参数" class="headerlink" title="4.1.3 可变参数"></a>4.1.3 可变参数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(*numbers)</span>:</span></span><br><span class="line">    sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">        sum = sum + n * n</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line">calc(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line">nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">calc(*nums)</span><br></pre></td></tr></table></figure><p>Python的解包会把序列内容解析出来。</p><p><strong>解包，将后面的对象释放出来的行为。解包后得到的是一个序列。</strong></p><h4 id="4-1-4-关键字参数"><a href="#4-1-4-关键字参数" class="headerlink" title="4.1.4 关键字参数"></a>4.1.4 关键字参数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, **kwargs)</span>:</span></span><br><span class="line">    print(<span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kwargs)</span><br></pre></td></tr></table></figure><h4 id="4-1-5-命名关键字参数"><a href="#4-1-5-命名关键字参数" class="headerlink" title="4.1.5 命名关键字参数"></a>4.1.5 命名关键字参数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, *, city, job)</span>:</span></span><br><span class="line">    print(name, age, city, job)</span><br></pre></td></tr></table></figure><p>命名关键字参数需要一个特殊分隔符<em>，</em>后面的参数被视为命名关键字参数。</p><h4 id="4-1-6-参数顺序"><a href="#4-1-6-参数顺序" class="headerlink" title="4.1.6 参数顺序"></a>4.1.6 参数顺序</h4><p>参数定义的顺序必须是：<strong>必选参数</strong>、<strong>默认参数</strong>、<strong>可变参数</strong>、<strong>命名关键字参数</strong>和<strong>关键字参数</strong>。</p><h3 id="4-2-高阶函数"><a href="#4-2-高阶函数" class="headerlink" title="4.2 高阶函数"></a>4.2 高阶函数</h3><p>如果一个函数的<strong>传入参数也是一个函数</strong>，那么这个函数就是一个高阶函数。</p><h4 id="4-2-1-map"><a href="#4-2-1-map" class="headerlink" title="4.2.1 map"></a>4.2.1 map</h4><p><code>map()</code>函数接受两个参数， 一个是计算函数， 另一个是迭代器。</p><p>功能是不断取得迭代器中的返回值作为计算函数的传入参数，计算得到的值作为返回值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x*x</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r = map(f, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>r</span><br><span class="line">&lt;map object at <span class="number">0x104abeb00</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(r)</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure><h4 id="4-2-2-reduce"><a href="#4-2-2-reduce" class="headerlink" title="4.2.2 reduce"></a>4.2.2 reduce</h4><p><code>reduce()</code>函数也是传入一个函数，一个迭代器。</p><p>功能和map不同的是， 第一次取得迭代器的两个值，传入函数得到结果，该结果和迭代器的下一个值继续传入函数中，不断循环计算直到计算完毕迭代器中的全部值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x + y</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(add, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure><p>应用map和reduce可以做到字符数字转化为整数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line">DIGITS = &#123;<span class="string">'0'</span>: <span class="number">0</span>, <span class="string">'1'</span>: <span class="number">1</span>, <span class="string">'2'</span>: <span class="number">2</span>, <span class="string">'3'</span>: <span class="number">3</span>, <span class="string">'4'</span>: <span class="number">4</span>, <span class="string">'5'</span>: <span class="number">5</span>, <span class="string">'6'</span>: <span class="number">6</span>, <span class="string">'7'</span>: <span class="number">7</span>, <span class="string">'8'</span>: <span class="number">8</span>, <span class="string">'9'</span>: <span class="number">9</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">char2num</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> DIGITS[s]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">str2int</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> reduce(<span class="keyword">lambda</span> x, y: x * <span class="number">10</span> + y, map(char2num, s))</span><br></pre></td></tr></table></figure><h4 id="4-2-3-filter"><a href="#4-2-3-filter" class="headerlink" title="4.2.3 filter"></a>4.2.3 filter</h4><p>同样传入两个参数， 一个函数一个可迭代对象。</p><p>功能类似map，不过该函数返回True该值保留，返回False该值不保留。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> n % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(filter(is_odd, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>]))</span><br><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">15</span>]</span><br></pre></td></tr></table></figure><h4 id="4-2-4-sorted"><a href="#4-2-4-sorted" class="headerlink" title="4.2.4 sorted"></a>4.2.4 sorted</h4><p>排序函数，传入一个序列，<strong>返回排序后的序列</strong>。原序列<strong>不发生改变</strong>。</p><ul><li><strong>参数key</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted([<span class="number">36</span>, <span class="number">5</span>, <span class="number">-12</span>, <span class="number">9</span>, <span class="number">-21</span>], key=abs)</span><br><span class="line">[<span class="number">5</span>, <span class="number">9</span>, <span class="number">-12</span>, <span class="number">-21</span>, <span class="number">36</span>]</span><br></pre></td></tr></table></figure><p>相当于是map函数，key接受的是一个处理函数。之后对map函数的结果进行排序。</p><ul><li><strong>参数reverse</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted([<span class="number">1</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">6</span>])</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted([<span class="number">1</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">6</span>], reverse=<span class="keyword">True</span>)</span><br><span class="line">[<span class="number">7</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>默认是升序排列，改值默认值为False。</p><h3 id="4-3-闭包"><a href="#4-3-闭包" class="headerlink" title="4.3 闭包"></a>4.3 闭包</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">()</span>:</span></span><br><span class="line">    fs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">             <span class="keyword">return</span> i*i</span><br><span class="line">        fs.append(f)</span><br><span class="line">    <span class="keyword">return</span> fs</span><br><span class="line"></span><br><span class="line">f1, f2, f3 = count()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f2()</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f3()</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure><p>像这种，<strong>函数内部嵌套函数</strong>， <strong>嵌套函数调用函数局部变量</strong>，<strong>函数返回该嵌套函数</strong>，的函数就称为闭包。</p><p>闭包的特性是能够外部调用函数内容的函数，且使用到之前时候的局部变量。</p><p>在这个函数中，由于在<strong>完成count()的时候会遍历该for循环</strong>， 导致在调用<code>f1()</code>之前局部变量i已经等于3了。</p><h3 id="4-4-lambda函数"><a href="#4-4-lambda函数" class="headerlink" title="4.4 lambda函数"></a>4.4 lambda函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">num</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">10</span> + y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">lambda</span> x, y: x * <span class="number">10</span> + y</span><br></pre></td></tr></table></figure><h3 id="4-5-装饰器"><a href="#4-5-装饰器" class="headerlink" title="4.5 装饰器"></a>4.5 装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        print(<span class="string">'call %s():'</span> % func.__name__)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@log</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'2018-09-03'</span>)</span><br></pre></td></tr></table></figure><p>执行过程：</p><ul><li><code>@log</code>：执行到装饰器语法糖时;</li><li><code>log(now)</code>: 会将装饰的函数作为参数;</li><li><code>def wrapper()</code>: 执行装饰器第一层内容;</li><li><code>now = wrapper</code>: 并将返回值设置成装饰的函数。</li></ul><p>等价操作为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now = log(now)</span><br></pre></td></tr></table></figure><p>如果需要在装饰器的时候传入参数。编写的装饰器需要再添加一层。</p><p>原因如下：</p><p>@装饰器 这是个固定格式，要传入参数，就需要一个函数来接受，也就是说，需要在原有的基础上，使得 <strong>装饰器=函数(传入参数)</strong>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(text)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">            print(<span class="string">'%s %s():'</span> % (text, func.__name__))</span><br><span class="line">            <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line">    </span><br><span class="line"><span class="meta">@log('execute')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'2015-3-25'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line"></span><br><span class="line">now = log(<span class="string">'execute'</span>)(now)</span><br><span class="line"><span class="comment"># now = log(now) # 这是之前</span></span><br></pre></td></tr></table></figure><p>完整写法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">    @functools.wraps(func)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        print(<span class="string">'call %s():'</span> % func.__name__)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kw)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure><h3 id="4-6-偏函数"><a href="#4-6-偏函数" class="headerlink" title="4.6 偏函数"></a>4.6 偏函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line">int2 = functools.partial(int, base=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相当于</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">int2</span><span class="params">(x, base=<span class="number">2</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> int(x, base)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">max2 = functools.partial(max, <span class="number">10</span>)</span><br><span class="line">max2(<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 相当于</span></span><br><span class="line">max(<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure><h3 id="4-7-静态函数和类函数"><a href="#4-7-静态函数和类函数" class="headerlink" title="4.7 静态函数和类函数"></a>4.7 静态函数和类函数</h3><ul><li>静态函数使用<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-   类函数使用```@classmethod```，函数仅仅绑定给类不绑定给对象，无需传入对象，但是需要传入类作为第一个参数；</span><br><span class="line"></span><br><span class="line">## 5 一些特性</span><br><span class="line"></span><br><span class="line">### 5.1 迭代</span><br><span class="line"></span><br><span class="line">通过for循环来遍历这个list或tuple，这种遍历我们称为**迭代**（Iteration）。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 5.2 列表生成式</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">&gt;&gt;&gt; [x * x for x in range(1, 11)]</span><br><span class="line">[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; [x * x for x in range(1, 11) if x % 2 == 0]</span><br><span class="line">[4, 16, 36, 64, 100]</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; [m + n for m in &apos;ABC&apos; for n in &apos;XYZ&apos;]</span><br><span class="line">[&apos;AX&apos;, &apos;AY&apos;, &apos;AZ&apos;, &apos;BX&apos;, &apos;BY&apos;, &apos;BZ&apos;, &apos;CX&apos;, &apos;CY&apos;, &apos;CZ&apos;]</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-3-生成器"><a href="#5-3-生成器" class="headerlink" title="5.3 生成器"></a>5.3 生成器</h3><p>一边循环一边计算的机制，称为<strong>生成器</strong>：generator。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x10dd45ba0</span>&gt;</span><br></pre></td></tr></table></figure><p>输出生成器的内容使用函数<code>next()</code>。</p><p>同时生成器也是可迭代的。</p><p>使用<code>yield</code>可以编写生成器函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">odd</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'step 1'</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    print(<span class="string">'step 2'</span>)</span><br><span class="line">    <span class="keyword">yield</span>(<span class="number">3</span>)</span><br><span class="line">    print(<span class="string">'step 3'</span>)</span><br><span class="line">    <span class="keyword">yield</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o = odd()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(o)</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(o)</span><br><span class="line">step <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(o)</span><br><span class="line">step <span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(o)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure><h3 id="5-4-迭代器"><a href="#5-4-迭代器" class="headerlink" title="5.4 迭代器"></a>5.4 迭代器</h3><p>可以直接作用于for循环的可迭代对象， 叫做<strong>可迭代对象</strong>（Iterable）。</p><p>可以使用<code>isinstance()</code>判断一个对象是否是可迭代对象：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance([], Iterable)</span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure><p>可以被<code>next()</code>函数调用并不断返回下一个值的对象称为<strong>迭代器</strong>：Iterator。</p><h2 id="6-面向对象"><a href="#6-面向对象" class="headerlink" title="6 面向对象"></a>6 面向对象</h2><h3 id="6-1-特殊变量"><a href="#6-1-特殊变量" class="headerlink" title="6.1 特殊变量"></a>6.1 特殊变量</h3><p><strong>__name</strong>会被解释成<strong>_classname__name</strong>，进而形成私有变量。</p><p><strong>_name</strong>表明是一个私有变量，虽然可以直接访问，但是约定俗成不要直接访问。</p><h3 id="6-2-继承和多态"><a href="#6-2-继承和多态" class="headerlink" title="6.2 继承和多态"></a>6.2 继承和多态</h3><p>继承后的类叫做<strong>子类</strong>。</p><p>被继承的类叫做<strong>父类，基类，超类</strong>。</p><p>子类获得了父类的全部功能。</p><p>多态，子类重写父类方法时，子类调用该方法会直接调用 子类自己的方法而不是父类的方法。</p><p>“<strong>鸭子类型</strong>”：在python（动态语言）中，如果限定参数必须是某类，不会像静态语言那样必须要求是该类和其子类。</p><p>只需要有对应的可执行的方法就行。也就是看起来像就行（file-like object）。</p><p>例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'Animal is running...'</span>)</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_twice</span><span class="params">(animal)</span>:</span></span><br><span class="line">    animal.run()</span><br><span class="line">    animal.run()</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Timer</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'Start...'</span>)</span><br><span class="line">        </span><br><span class="line"> <span class="comment"># 这样的操作是可以的</span></span><br><span class="line"> run_twice(Timer())</span><br></pre></td></tr></table></figure><h3 id="6-3-多重继承"><a href="#6-3-多重继承" class="headerlink" title="6.3 多重继承"></a>6.3 多重继承</h3><p>多重不断递进的方法通常是不可取的。</p><p>动物可能分哺乳动物和非哺乳动物，但是如果要区分爬行和飞行动物呢，可以不用继续继承，而是使用MixIn的方式。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTCPServer</span><span class="params">(TCPServer, ForkingMixIn)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUDPServer</span><span class="params">(UDPServer, ThreadingMixIn)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="6-4-特殊变量和方法"><a href="#6-4-特殊变量和方法" class="headerlink" title="6.4 特殊变量和方法"></a>6.4 特殊变量和方法</h3><h4 id="6-4-1-slots-和-dict"><a href="#6-4-1-slots-和-dict" class="headerlink" title="6.4.1 __slots__和__dict__"></a>6.4.1 __slots__和__dict__</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    __slots__ = (<span class="string">'name'</span>, <span class="string">'age'</span>) <span class="comment"># 用tuple定义允许绑定的属性名称</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student() <span class="comment"># 创建新的实例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.name = <span class="string">'Michael'</span> <span class="comment"># 绑定属性'name'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.age = <span class="number">25</span> <span class="comment"># 绑定属性'age'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">99</span> <span class="comment"># 绑定属性'score'</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'Student'</span> object has no attribute <span class="string">'score'</span></span><br></pre></td></tr></table></figure><p>dict包含了一个类或者对象绑定的相关的属性。</p><p>直接输出就可以查看。字典类型。</p><h4 id="6-4-2-len"><a href="#6-4-2-len" class="headerlink" title="6.4.2 __len__()"></a>6.4.2 __len__()</h4><p>定义该方法之后，可以直接使用<strong>len(实例)</strong>。</p><h4 id="6-4-3-str-和-repr"><a href="#6-4-3-str-和-repr" class="headerlink" title="6.4.3 __str__()和__repr__()"></a>6.4.3 __str__()和__repr__()</h4><p>print()输入实例的时候调用__str__()函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student(<span class="string">'weihc'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&lt;__main__.Student object at <span class="number">0x109afb310</span>&gt;</span><br></pre></td></tr></table></figure><p>__repr__()用于改变这样的输出。</p><h4 id="6-4-4-iter-和-next"><a href="#6-4-4-iter-和-next" class="headerlink" title="6.4.4 __iter__()和__next__()"></a>6.4.4 __iter__()和__next__()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a, self.b = <span class="number">0</span>, <span class="number">1</span> <span class="comment"># 初始化两个计数器a，b</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self <span class="comment"># 实例本身就是迭代对象，故返回自己</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a, self.b = self.b, self.a + self.b <span class="comment"># 计算下一个值</span></span><br><span class="line">        <span class="keyword">if</span> self.a &gt; <span class="number">100000</span>: <span class="comment"># 退出循环的条件</span></span><br><span class="line">            <span class="keyword">raise</span> StopIteration()</span><br><span class="line">        <span class="keyword">return</span> self.a <span class="comment"># 返回下一个值</span></span><br></pre></td></tr></table></figure><h4 id="6-4-5-getitem-和-getattr"><a href="#6-4-5-getitem-和-getattr" class="headerlink" title="6.4.5 __getitem__()和__getattr__()"></a>6.4.5 __getitem__()和__getattr__()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> isinstance(n, int): <span class="comment"># n是索引</span></span><br><span class="line">            a, b = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> range(n):</span><br><span class="line">                a, b = b, a + b</span><br><span class="line">            <span class="keyword">return</span> a</span><br><span class="line">        <span class="keyword">if</span> isinstance(n, slice): <span class="comment"># n是切片</span></span><br><span class="line">            start = n.start</span><br><span class="line">            stop = n.stop</span><br><span class="line">            <span class="keyword">if</span> start <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">                start = <span class="number">0</span></span><br><span class="line">            a, b = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">            L = []</span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> range(stop):</span><br><span class="line">                <span class="keyword">if</span> x &gt;= start:</span><br><span class="line">                    L.append(a)</span><br><span class="line">                a, b = b, a + b</span><br><span class="line">            <span class="keyword">return</span> L</span><br><span class="line">        </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = Fib()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f[<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f[<span class="number">0</span>:<span class="number">5</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure><p>__getattr__()虽然函数名类似，但是功能完全不同。</p><p>当调用实例中不存在的属性的时候，会调用该方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="string">'weihc'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, attr)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> attr==<span class="string">'score'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">99</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.name</span><br><span class="line"><span class="string">'weihc'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score</span><br><span class="line"><span class="number">99</span></span><br></pre></td></tr></table></figure><h4 id="6-4-6-del"><a href="#6-4-6-del" class="headerlink" title="6.4.6 __del__()"></a>6.4.6 __del__()</h4><p>析构函数。</p><p>调用del可能会触发改函数，会先判断引用计数是否为0了， 如果为0了就会执行。</p><p>在程序完成之后会执行该函数。</p><h4 id="6-4-7-enter-和-exit"><a href="#6-4-7-enter-和-exit" class="headerlink" title="6.4.7 __enter__()和__exit__()"></a>6.4.7 __enter__()和__exit__()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        print(exc_type, exc_val, exc_tb)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span>     <span class="comment"># 出错之后程序不会中断</span></span><br><span class="line">        <span class="comment"># return False  # 出错之后程序会中断</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Foo() <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">raise</span> KeyError(<span class="string">"ERROR"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"done"</span>)</span><br></pre></td></tr></table></figure><p>with的执行过程是：</p><ul><li>创建Foo()对象，调用init();</li><li>执行enter方法，返回值赋值给变量f；</li><li>执行with内容，出错或者执行完毕执行exit()方法。返回值为True程序继续执行。</li></ul><h3 id="6-5-元类"><a href="#6-5-元类" class="headerlink" title="6.5 元类"></a>6.5 元类</h3><h4 id="6-5-1-基本形式"><a href="#6-5-1-基本形式" class="headerlink" title="6.5.1 基本形式"></a>6.5.1 基本形式</h4><p>元类的含义相当于是生成类的类。</p><p>在定义一个类的时候， 传入参数metaclass。</p><p>基本定义方式为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListMetaclass</span><span class="params">(type)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, name, bases, attrs)</span>:</span></span><br><span class="line">        attrs[<span class="string">'add'</span>] = <span class="keyword">lambda</span> self, value: self.append(value)</span><br><span class="line">        <span class="keyword">return</span> type.__new__(cls, name, bases, attrs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span><span class="params">(list, metaclass=ListMetaclass)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>new()函数的四个参数分别是：</p><ul><li>当前准备创建的类的对象；</li><li>类的名字；</li><li>类继承的父类集合；</li><li>类的方法集合</li></ul><p>执行过程是， 在创建类MyList的时候调用ListMetaclass的new()方法。</p><p>其中要注意的是，创建带有元类的类的时候，会先遍历类的内容，在创建。</p><h4 id="6-5-2-type"><a href="#6-5-2-type" class="headerlink" title="6.5.2 type"></a>6.5.2 type</h4><p>正常使用type创建一个类可以使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type(<span class="string">'class_name'</span>, (object,), dict(class_func=fn))</span><br></pre></td></tr></table></figure><p>传入三个参数： 类名， 继承的父类集合， 方法名称与函数绑定集合。</p><h4 id="6-5-3-new-和-init"><a href="#6-5-3-new-和-init" class="headerlink" title="6.5.3 __new__()和__init__()"></a>6.5.3 __new__()和__init__()</h4><p>new()函数用于创建该类的实例。需要返回值。</p><p>init()函数用于初始化该类实例。 在new()函数正确执行且返回生成好的对象之后才执行，不需要返回值。</p><p>new()函数创建对象的方式， 一般是使用父类的new()创建。如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> type.__new__(cls, name, bases, attrs)</span><br></pre></td></tr></table></figure><h4 id="6-5-4-调用父类init方法"><a href="#6-5-4-调用父类init方法" class="headerlink" title="6.5.4 调用父类init方法"></a>6.5.4 调用父类init方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">super(StringField, self).__init__(name, <span class="string">'varchar(100)'</span>)</span><br></pre></td></tr></table></figure><p>super()函数传入两个参数，一个是当前类名，另一个是当前类的实例对象。</p><p>注意super函数需要传入实例对象。</p><p>使用super()函数而不是直接使用父类来直接调用函数还因为super()函数会处理多继承的问题。</p><h3 id="6-6-新式类和经典类"><a href="#6-6-新式类和经典类" class="headerlink" title="6.6 新式类和经典类"></a>6.6 新式类和经典类</h3><h4 id="6-6-1-定义"><a href="#6-6-1-定义" class="headerlink" title="6.6.1 定义"></a>6.6.1 定义</h4><p>在python2中，默认是经典类，显式继承object的是新式类。</p><p>在python3中，始终是新式类。</p><h4 id="6-6-2-区别"><a href="#6-6-2-区别" class="headerlink" title="6.6.2 区别"></a>6.6.2 区别</h4><ul><li>经典类的积累搜索顺序（MRO）是深度优先，新式类的MRO是广度优先；</li><li>经典类对象是通过instance生成的，类型是instance，而新式类统一了类和实例的引入，__class__和type()查询结果一致；</li><li>新式类相同父类的构造方法只执行一次。</li></ul><h2 id="7-测试"><a href="#7-测试" class="headerlink" title="7 测试"></a>7 测试</h2><h3 id="7-1-单元测试"><a href="#7-1-单元测试" class="headerlink" title="7.1 单元测试"></a>7.1 单元测试</h3><p>编写测试类需要继承<code>unittest.TestCase</code>。</p><p>测试方法需要以test开头， 否则不会执行。</p><p>常用的判断测试的方法是：</p><ul><li><code>self.assertEqual(d.b, &#39;test&#39;)</code></li><li><code>self.assertTrue(isinstance(d, dict))</code></li><li><code>with self.assertRaises(KeyError): value = d[&#39;empty&#39;]</code></li></ul><p>运行单元测试的方法：</p><ul><li><code>unittest.main()</code></li><li><code>python -m unittest mydict_test</code>， 注意只需要文件名， 没有后缀。</li></ul><p>可以在单元测试中编写两个特殊的<code>setUp()</code>和<code>tearDown()</code>方法。这两个方法会分别在每调用一个测试方法的前后分别被执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestDict</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_init</span><span class="params">(self)</span>:</span></span><br><span class="line">        d = Dict(a=<span class="number">1</span>, b=<span class="string">'test'</span>)</span><br><span class="line">        self.assertEqual(d.a, <span class="number">1</span>)</span><br><span class="line">        self.assertEqual(d.b, <span class="string">'test'</span>)</span><br><span class="line">        self.assertTrue(isinstance(d, dict))</span><br></pre></td></tr></table></figure><h3 id="7-2-文档测试"><a href="#7-2-文档测试" class="headerlink" title="7.2 文档测试"></a>7.2 文档测试</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> doctest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">doctest.testmod()</span><br></pre></td></tr></table></figure><h2 id="8-文件操作"><a href="#8-文件操作" class="headerlink" title="8 文件操作"></a>8 文件操作</h2><h3 id="8-1-文件句柄"><a href="#8-1-文件句柄" class="headerlink" title="8.1 文件句柄"></a>8.1 文件句柄</h3><p>文件句柄对于打开文件是唯一的识别依据。</p><h2 id="9-内置函数"><a href="#9-内置函数" class="headerlink" title="9 内置函数"></a>9 内置函数</h2><h3 id="9-1-all-和any"><a href="#9-1-all-和any" class="headerlink" title="9.1 all()和any()"></a>9.1 all()和any()</h3><p><code>all()</code>函数要所有值bool之后为True才为True，否则为Flase；</p><p><code>any()</code>与之相反。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>all([])</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>all([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>all([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="keyword">None</span>])</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure><h3 id="9-2-进制转换"><a href="#9-2-进制转换" class="headerlink" title="9.2 进制转换"></a>9.2 进制转换</h3><ul><li><code>bin()</code> 二进制</li><li><code>oct()</code> 八进制</li><li><code>hex()</code> 十六进制</li></ul><h3 id="9-3-字符编码转化"><a href="#9-3-字符编码转化" class="headerlink" title="9.3 字符编码转化"></a>9.3 字符编码转化</h3><ul><li><code>chr()</code> 编码转化为字符</li><li><code>ord()</code> 字符转化为编码</li></ul><h3 id="9-4-divmod"><a href="#9-4-divmod" class="headerlink" title="9.4 divmod"></a>9.4 divmod</h3><p>返回商和余数。</p><h2 id="10-异常处理"><a href="#10-异常处理" class="headerlink" title="10 异常处理"></a>10 异常处理</h2><p>try会执行执行代码内容，遇到错误之后就不再执行下去，将错误递交给except。</p><p>所以在出现异常之后执行返回语句，这个返回语句是不会执行的。</p><p>except语句都会执行。</p><p>finally语句始终会执行。遇到return的情况是，记住函数的返回值，最后执行完finally后完毕整个函数。</p>]]></content>
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 基础 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python解释器</title>
      <link href="/2018/09/01/python%E8%A7%A3%E9%87%8A%E5%99%A8/"/>
      <url>/2018/09/01/python%E8%A7%A3%E9%87%8A%E5%99%A8/</url>
      <content type="html"><![CDATA[<h2 id="1-Python的常用解释器"><a href="#1-Python的常用解释器" class="headerlink" title="1 Python的常用解释器"></a>1 Python的常用解释器</h2><h3 id="CPython"><a href="#CPython" class="headerlink" title="CPython"></a>CPython</h3><p>官方版本的解释器：CPython。</p><p>这个解释器是用C语言开发的，所以叫CPython。</p><p>默认在命令行下运行python就是启动CPython解释器。</p><p>CPython是使用最广的Python解释器</p><h3 id="IPython"><a href="#IPython" class="headerlink" title="IPython"></a>IPython</h3><p>IPython是基于CPython之上的一个交互式解释器，只是在交互方式上有所增强。</p><p>CPython用<strong>&gt;&gt;&gt;</strong>作为提示符，而IPython用<strong>In [序号]:</strong>作为提示符。</p><h3 id="PyPy"><a href="#PyPy" class="headerlink" title="PyPy"></a>PyPy</h3><p>PyPy是另一个Python解释器，它的目标是执行速度。</p><p>PyPy采用<strong>JIT技术</strong>，对Python代码进行<strong>动态编译</strong>（注意不是解释），所以可以<strong>显著提高Python代码的执行速度</strong>。</p><p>绝大部分Python代码都可以在PyPy下运行，但是PyPy和CPython有一些是不同的，这就导致相同的Python代码在两种解释器下执行可能会有不同的结果。</p><h3 id="Jython"><a href="#Jython" class="headerlink" title="Jython"></a>Jython</h3><p>Jython是运行在Java平台上的Python解释器，可以直接把Python代码编译成Java字节码执行。</p><h3 id="IronPython"><a href="#IronPython" class="headerlink" title="IronPython"></a>IronPython</h3><p>IronPython和Jython类似，只不过IronPython是运行在微软.Net平台上的Python解释器，可以直接把Python代码编译成.Net的字节码。</p><h2 id="2-解释-提前编译-实时编译"><a href="#2-解释-提前编译-实时编译" class="headerlink" title="2 解释 提前编译 实时编译"></a>2 解释 提前编译 实时编译</h2><h3 id="提前（AOT）编译"><a href="#提前（AOT）编译" class="headerlink" title="提前（AOT）编译"></a>提前（AOT）编译</h3><p>编译高级编程语言为对应的机器代码， 以便生成的二进制文件可以本机执行。</p><h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><p>解释是<strong>直接执行脚本语言</strong>， 而不需要事先将它们编译成机器语言。</p><p>解释器的主要缺点是解释程序通常比编译时运行得<strong>慢</strong>。</p><p>解释器通常使用以下策略之一来执行程序：</p><ul><li>解析的源代码，并直接执行其行为;</li><li>将源代码转换为一些有效的<strong>中间表示</strong>并立即执行此操作;</li><li>显式执行由编译器生成的存储的预编译代码，编译器是解释器系统的一部分。</li></ul><p>术语“ <strong>解释语言</strong> ”或“ <strong>编译语言</strong> ”表示该语言的规范实现分别是<strong>解释器</strong>或<strong>编译器</strong>。</p><h3 id="实时（JIT）编译"><a href="#实时（JIT）编译" class="headerlink" title="实时（JIT）编译"></a>实时（JIT）编译</h3><p>涉及程序执行期间的编译。</p><p>实时编译系统通常的做法是，连续地分析正在执行的代码，并识别代码的一部分，从而得到加速。且编译或重新编译获得的加速比将超过编译该代码的开销。</p><p>JIT编译结合了编译代码的速度和解释的灵活性，以及​解释器的开销和编译的额外开销（而不仅仅是解释）。</p><p>理论上，JIT编译可以比静态编译产生更快的执行速度。</p><h2 id="3-CPython和PyPy之间的差异"><a href="#3-CPython和PyPy之间的差异" class="headerlink" title="3 CPython和PyPy之间的差异"></a>3 CPython和PyPy之间的差异</h2><p><a href="https://pypy.readthedocs.io/en/latest/cpython_differences.html" target="_blank" rel="noopener">点我查看详细</a></p><p>‰</p>]]></content>
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 解释器 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>夏の幻-Garnet Crow</title>
      <link href="/2018/08/21/%E5%A4%8F%E4%B9%8B%E5%B9%BB-Garnet%20Crow/"/>
      <url>/2018/08/21/%E5%A4%8F%E4%B9%8B%E5%B9%BB-Garnet%20Crow/</url>
      <content type="html"><![CDATA[<p>部屋(へや)の窓(まど)の向(む)こうに<br>へやのまどのむこうに<br>飞行机云(ひこうきぐも)を なぞって<br>ひこうきぐもを なぞって<br>今日(きょう)ケンカした君(きみ)の事(こと)ばかり<br>考(かんが)えてた</p><p>些细(ささい)な事(こと)で戸惑(とまど)って<br>不安定(ふあんてい)で无防备(むぼうび)な<br>あの顷(ころ)のように<br>すぐに电话(でんわ)して<br>笑(わら)い合(あ)えたらいいのにね</p><p>近(ちか)づいて来(く)る 至福(しふく)の时(とき)は<br>痛(いた)みを伴(ともな)いながら足音(あしおと)をたてる<br>考(かんが)えすぎて深(ふか)みにハマる<br>君(きみ)の傍(そば)にいるのに</p><p>夏(なつ)の幻(まぼろし)<br>瞳闭(ひとみと)じて<br>一番最初(いちばんさいしょ)に君(きみ)を思(おも)い出(だ)すよ<br>いつか终(お)わる儚(はかな)い生命(ゆめ)に<br>ただ こみあげる気持(きも)ちい抱(だ)いた</p><p>世界(せかい)は広(ひろ)く<br>知(し)らない事溢(ことあふ)れてて自分(じぶん)さえ见失(みうしな)いそう<br>だけど君(きみ)と生(い)きてゆきたいから<br>とまどいながらでもいい<br>つないだ手(て)を离(はな)さないでね</p><p>强(つよ)いオフショア<br>波(なみ)を待(ま)ってた<br>中途半端(ちゅうとはんぱ)に离(はな)れて<br>流(なが)されてゆくよ<br>进化(しんか)してゆく时代(じだい)の中(なか)で<br>同(おな)じものを求(もと)めて</p><p>夏(なつ)の幻(まぼろし)<br>想(おも)うだけで<br>胸(むね)が热(あつ)くなれた奇迹(きせき)の途中(とちゅう)<br>愿(ねが)うだけじゃ　届(とど)かぬくらい<br>こぼれ落(お)ちそうな気持(きも)ち抱(だ)いた</p><p>どうして二人(ふたり)<br>近(ちか)づく程(ほど)<br>远(とお)く感(かん)じて　不安(ふあん)になるんだろう<br>キョリを超(こ)えた　欲望(よくぼう)があふれて<br>一人(ひとり) 部屋(へや)のなかで<br>君(きみ)の温(ぬく)もり想(おも)う</p><p>どんな日(ひ)にも<br>瞳闭(ひとみと)じて<br>一番最初(いちばんさいしょ)に　君(きみ)を思(おも)い出(だ)すよ<br>いつか终(お)わる儚(はかな)い生命（ゆめ）に<br>ただ こみあげる気持(きも)ち抱(だ)いた</p><p>忘(わす)れないから…<br>消(き)えゆく幻(まぼろし)に<br>君(きみ)と并(なら)んでいたね<br>夏(なつ)の终(お)わり阳射(ひざ)しがゆれてる<br>海(うみ)の底(そこ)のような手(て)のひらの中(なか)の街并(まちなみ)</p><p>I like a dream<br>I’m calling out to you</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>青花瓷-周杰伦</title>
      <link href="/2018/07/08/%E9%9D%92%E8%8A%B1%E7%93%B7-%E5%91%A8%E6%9D%B0%E4%BC%A6/"/>
      <url>/2018/07/08/%E9%9D%92%E8%8A%B1%E7%93%B7-%E5%91%A8%E6%9D%B0%E4%BC%A6/</url>
      <content type="html"><![CDATA[<h2 id="歌谱"><a href="#歌谱" class="headerlink" title="歌谱"></a>歌谱</h2><p><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/青花瓷-周杰伦/青花瓷.jpg" alt="青花瓷"></p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>安静-周杰伦</title>
      <link href="/2018/07/08/%E5%AE%89%E9%9D%99-%E5%91%A8%E6%9D%B0%E4%BC%A6/"/>
      <url>/2018/07/08/%E5%AE%89%E9%9D%99-%E5%91%A8%E6%9D%B0%E4%BC%A6/</url>
      <content type="html"><![CDATA[<h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>只剩下钢琴陪我谈了一天<br>睡著的大提琴 安静的旧旧的<br>我想你已表现的非常明白<br>我懂我也知道 你没有舍不得</p><p>你说你也会难过我不相信<br>牵著你陪著我 也只是曾经<br>希望他是真的比我还要爱你<br>我才会逼自己离开</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>你要我说多难堪 我根本不想分开<br>为什么还要我用微笑来带过<br>我没有这种天份 包容你也接受他<br>不用担心的太多 我会一直好好过</p><p>你已经远远离开 我也会慢慢走开<br>为什么我连分开都迁就著你<br>我真的没有天份 安（B3两个音）静的没这么快<br>我会学著放弃你 是因为我太爱你</p><h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p>AB AB B</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>千里之外-周杰伦</title>
      <link href="/2018/07/08/%E5%8D%83%E9%87%8C%E4%B9%8B%E5%A4%96-%E5%91%A8%E6%9D%B0%E4%BC%A6/"/>
      <url>/2018/07/08/%E5%8D%83%E9%87%8C%E4%B9%8B%E5%A4%96-%E5%91%A8%E6%9D%B0%E4%BC%A6/</url>
      <content type="html"><![CDATA[<h2 id="歌谱"><a href="#歌谱" class="headerlink" title="歌谱"></a>歌谱</h2><p><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/千里之外-周杰伦/千里之外.jpg" alt="千里之外"></p><h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>屋檐如悬崖 风铃如沧海<br>我等燕归来<br>时间被安排 演一场意外<br>你悄然走开</p><p>故事在城外 浓雾散不开<br>看不清对白<br>你听不出来 风声不存在<br>是我在感慨</p><p>梦醒来 是谁在窗台 把结局打开<br>那薄如蝉|翼的未来<br>经不起谁来拆</p><p>我送你离开 千里之外<br>你无声黑白<br>沉默年代 或许不该<br>太遥远的相爱</p><p>我送你离开 天涯之外<br>你是否还在<br>琴声何来 生死难猜<br>用一生去等待</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>一身琉璃白 透明着尘埃<br>你无瑕的爱<br>你从雨中来 诗化了悲哀<br>我淋湿现在</p><p>芙蓉水面采 船行影犹在<br>你却不回来<br>被岁月覆盖 你说的花开<br>过去成空白</p><p>梦醒来 是谁在窗台 把结局打开<br>那薄如蝉|翼的未来<br>经不起谁来拆</p><p>我送你离开 千里之外<br>你无声黑白<br>沉默年代 或许不该<br>太遥远的相爱</p><p>我送你离开 天涯之外<br>你是否还在<br>琴声何来 生死难猜<br>用一生 （没有去等待）</p><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><p>我送你离开 千里之外<br>你无声黑白<br>沉默年代 或许不该<br>太遥远的相爱</p><p>我送你离开 天涯之外<br>你是否还在<br>琴声何来 生死难猜<br>用一生去等待</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>e of s-泽野弘之</title>
      <link href="/2018/07/08/e%20of%20s-%E6%B3%BD%E9%87%8E%E5%BC%98%E4%B9%8B/"/>
      <url>/2018/07/08/e%20of%20s-%E6%B3%BD%E9%87%8E%E5%BC%98%E4%B9%8B/</url>
      <content type="html"><![CDATA[<p>各个平台的歌词都不一样，泽野大大的歌词一向生僻，google到的歌词和听到的总有差异。<br>因此给出两个版本的歌词:<br>一个是我慢放歌一遍一遍听出来的歌词， 纯平假名。<br>一个是我在lyrical-nonsense.com看到的歌词。</p><h2 id="纯平假名听出来的歌词"><a href="#纯平假名听出来的歌词" class="headerlink" title="纯平假名听出来的歌词"></a>纯平假名听出来的歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>ぼくおけしてえ　たつみの　がれのお<br>あらす　ほど　ちのねに　おびえる<br>こだわりのないきばで<br>どこお　とがめても<br>てすりも　つかめや  しない<br>いばしょおよ　けいも　とめる<br>さけも　end of sound</p><p>だれもいない<br>さわいだ　げんそに　こたえた　りてのわるど<br>むげんのSTAGEと　いかりだけ<br>ごみかせない　らせんのご　めざめた  ていこ</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>さめたまちの　あかりがと　もしても<br>きずの　いろ　いた　みわ　わからない<br>りくつなぎお　かかげ　ばせいおふらしても<br>あしもと　みずだ ら  け<br>ことばの　せいで　きまる<br>こたえない　いない</p><p>だれもいない<br>かわいた　かんじょで　ぎせいなった　ちじょのtears<br>くだいた　そらえ　さけんでも<br>たたかえない　むりょなえ　すなにな  えいこ</p><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>そこにだれもいない<br>さわいだ　げんそすで　きえてった　りていくのわるど<br>むげんのSTAGEと　いかりだけ<br>ごみかせない　らせんのご　めざめた   ていこ</p><h2 id="网上的歌词"><a href="#网上的歌词" class="headerlink" title="网上的歌词"></a>网上的歌词</h2><p>「僕」を消して得た「罪逃れの王」<br>荒らすほど地の音に怯える<br>拘りの無い牙で　どこを咎めても<br>手すりも掴めやしない<br>居場所を余計求める<br>叫ぶも　end of sound<br>“boku” o keshite eta “tsumi nogare no ou”<br>arasu hodo chi no oto ni obieru<br>kodawari no nai kiba de doko o togametemo<br>tesuri mo tsukame ya shinai<br>ibasho o yokei motomeru<br>sakebu mo end of sound</p><p>誰もいない<br>騒いだ幻想に答えて得たリテイクのワールド<br>無限のSTAGEと怒りだけ<br>誤魔化せない螺旋の業　目覚めた抵抗<br>daremo inai<br>sawaida gensou ni kotaete eta riteiku no waarudo<br>mugen no STAGE to ikari dake<br>gomakasenai rasen no gou mezameta teikou</p><p>覚めた街の明かりが灯しても<br>傷の色・痛みは解らない<br>理屈な義を掲げ罵声を降らしても<br>足元水だらけ<br>sameta machi no akari ga tomoshitemo<br>kizu no iro ・ itami wa wakaranai<br>rikutsu na gi o kakage basei o furashitemo<br>ashimoto mizu darake</p><p>言葉の精度で決まる<br>答えなどいらない<br>kotoba no seido de kimaru<br>kotae nado iranai</p><p>誰もいない<br>乾いた感情で犠牲になった地上のtears<br>砕いた空へ叫んでも<br>戦えない無力なエゴ　砂になる栄光<br>daremo inai<br>kawaita kanjou de gisei ni natta chijou no tears<br>kudaita sora e sakendemo<br>tatakaenai muryoku na ego suna ni naru eikou</p><p>誰もいない<br>騒いだ幻想を捨て消えてったリテイクのワールド<br>無限のSTAGEと怒りだけ<br>誤魔化せない螺旋の業　目覚めた抵抗<br>daremo inai<br>sawaida gensou o sute kietetta riteiku no waarudo<br>mugen no STAGE to ikari dake<br>gomakasenai rasen no gou mezameta teikou</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>父亲-筷子兄弟</title>
      <link href="/2018/07/08/%E7%88%B6%E4%BA%B2-%E7%AD%B7%E5%AD%90%E5%85%84%E5%BC%9F/"/>
      <url>/2018/07/08/%E7%88%B6%E4%BA%B2-%E7%AD%B7%E5%AD%90%E5%85%84%E5%BC%9F/</url>
      <content type="html"><![CDATA[<h2 id="歌谱"><a href="#歌谱" class="headerlink" title="歌谱"></a>歌谱</h2><p><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/父亲-筷子兄弟/父亲.jpg" alt="父亲"></p><h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>总是向你索取 却不曾说谢谢你<br>直到长大以后 才懂得你不容易<br>每次离开总是 装作轻松的样子<br>微笑着说回去吧 转身泪湿眼底</p><p>多想和从前一样 牵你温暖手掌<br>可是你不在我身旁 托清风捎去安康</p><p>时光时光慢些吧 不要再让你变老了<br>我愿用我一切 换你岁月长留<br>一生要强的爸爸 我能为你做些什么<br>微不足道的关心 收下吧</p><p>谢谢你做的一切 双手撑起我们的家<br>总是竭尽所有 把最好的给我<br>我是你的骄傲吗 还在为我而担心吗<br>你牵挂的孩子啊 长大啦</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>多想和从前一样 牵你温暖手掌<br>可是你不在我身旁 托清风捎去安康</p><p>时光时光慢些吧 不要再让你变老了<br>我愿用我一切 换你岁月长留<br>一生要强的爸爸 我能为你做些什么<br>微不足道的关心 收下吧</p><p>谢谢你做的一切 双手撑起我们的家<br>总是竭尽所有 把最好的给我<br>我是你的骄傲吗 还在为我而担心吗<br>你牵挂的孩子啊 长大啦</p><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>时光时光慢些吧 不要再让你变老啦<br>我愿用我一切 换你岁月长留<br>我是你的骄傲吗 还在为我而担心吗<br>你牵挂的孩子啊 长大啦</p><p>感谢一路上有你</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>大唐玄怪来谒-肥皂菌</title>
      <link href="/2018/07/08/%E5%A4%A7%E5%94%90%E7%8E%84%E6%80%AA%E6%9D%A5%E8%B0%92-%E8%82%A5%E7%9A%82%E8%8F%8C/"/>
      <url>/2018/07/08/%E5%A4%A7%E5%94%90%E7%8E%84%E6%80%AA%E6%9D%A5%E8%B0%92-%E8%82%A5%E7%9A%82%E8%8F%8C/</url>
      <content type="html"><![CDATA[<h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>文翰初议周隋 再话旧唐<br>以尺墨安定狐媚<br>平生偏好奇诡 又易食髓知味<br>秉夜烛 诗邀神鬼<br>听说落魄书生 杜氏子春<br>虎皮上两世长梦 成仙或为人<br>他已识门道九分 偏情字入骨深</p><p>清夜慎持明烛台 它亦吟得词句入怀<br>大唐遍出诗才 待我坐镇云峰台<br>千里紫霞参拜 引鹤来<br>剑指乌妖一当百 身性刚正<br>怎怕污邪侵害<br>只把酒此生付慷慨 喝完<br>披朱衣再去游炎海</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>笔触刺骨几分 毫若青锋<br>如凡俗入骨几寸 最难罢品红尘<br>异事易勾瘾症<br>上酒卮 劳君多论<br>时人文章评批 非不靡丽<br>却可惜殊少骨气 不如拂袖去<br>练绝这一手棋技 普世人桔中戏</p><p>当心红鬼鸣鼓钟<br>提柄长剑叩你颈痛<br>方知善恶有终<br>上元广陵景最浓 由我乘驾天虹 彩云中<br>敢凭纸符救白龙<br>并非是我 醉得太过放纵<br>只爱煞一生逞英雄<br>不叹匆匆 真君子不言怪</p><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>自诩假小人尽可谈的开怀<br>因我解下绣龙裳 世间无人敢自称王<br>犯我半分张狂 挑亮烛光点鬼将<br>推杯豪饮琼浆 祭参商<br>扬手呼童请明皇 突觉喉中<br>酒烈吐出金蟒 吞山河胸胆正开张<br>容我 怒书这一卷说盛唐</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>不朽之罪-双笙</title>
      <link href="/2018/07/08/%E4%B8%8D%E6%9C%BD%E4%B9%8B%E7%BD%AA-%E5%8F%8C%E7%AC%99/"/>
      <url>/2018/07/08/%E4%B8%8D%E6%9C%BD%E4%B9%8B%E7%BD%AA-%E5%8F%8C%E7%AC%99/</url>
      <content type="html"><![CDATA[<h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>打乱的骨牌 习惯盲目依赖↑<br>以坦然姿态 等风来→<br>鞋跟下青苔 爬满拖地裙摆→<br>神的福音被隔|绝窗外↑</p><p>天平支点倾斜 自尊将我打败<br>不安的窘态 在作怪<br>我熟知的年代还能区分黑白<br>无需卖弄心|机耍赖</p><p>为谁深陷不知往返的迷恋<br>未曾认清这个世界<br>我听到权力之争彻夜不歇<br>街尾血香|愈显浓烈</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>空间接应点 于囚笼中调（diao）配<br>密封的花蕊 正枯萎<br>听断线傀儡 晚安留在句尾<br>僵硬的思维筛选错对</p><p>天平支点倾斜 自尊将我打败<br>不安的窘态 在作怪<br>我熟知的年代 还能区分黑白<br>无需卖弄心|机耍赖</p><p>为谁深陷不知往返的迷恋<br>未曾认清这个世界<br>我听到权力之争彻夜不歇<br>街尾血香|愈显浓烈</p><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>甘愿臣服于谁 立忠诚之碑<br>重叠暗夜又一番教诲<br>结局早已无谓<br>明与灭 滞留病态的美</p><h3 id="D"><a href="#D" class="headerlink" title="D"></a>D</h3><p>为谁深陷不知往返的迷恋<br>为谁认清这个世界<br>我听到权力之争彻夜不歇<br>街尾血香|显浓烈</p><p>打乱的骨牌 习惯盲目依赖<br>（为谁深陷不知往返的迷恋）</p><p>以坦然姿态 等风来<br>（未曾认清这个世界）</p><p>让断线傀儡 晚安留在句尾<br>（我听到权力之争彻夜不歇）</p><p>僵硬的思维筛选错对<br>（街尾血香愈显浓烈)</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>高飞-张杰</title>
      <link href="/2018/07/08/%E9%AB%98%E9%A3%9E-%E5%BC%A0%E6%9D%B0/"/>
      <url>/2018/07/08/%E9%AB%98%E9%A3%9E-%E5%BC%A0%E6%9D%B0/</url>
      <content type="html"><![CDATA[<h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>奔跑穿越无尽的荒原<br>逐梦的脚步突然停歇<br>无边断崖 横在眼前<br>我懂 我要 蜕变</p><p>偶尔想起温暖的昨天<br>为了梦想不再留恋<br>新的起点就在眼前<br>我已做好准备</p><p>我要高飞 到天空的顶点<br>我要飞到<strong>无人</strong>能及的视界<br>飞得再累 不准自己跌坠<br>直到太阳就在我的指尖</p><p>我要高飞 到世界的边缘<br>我要飞越<strong>没人</strong>到达的绝对<br>不到终点 不准流下眼泪<br>要把最震撼的呐喊留在灿烂瞬间</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>偶尔想起温暖的昨天<br>为了梦想不再留恋<br>新的起点就在眼前<br>我已做好准备</p><p>我要高飞 到天空的顶点<br>我要飞到<strong>无人</strong>能及的视界<br>飞得再累 不准自己跌坠<br>直到太阳就在我的指尖</p><p>我要高飞 到世界的边缘<br>我要飞越<strong>没人</strong>到达的绝对<br>不到终点 不准流下眼泪<br>要把最震撼的呐喊留在</p><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>我要高飞 到天空的顶点<br>我要飞到<strong>无人</strong>能及的视界<br>飞得再累 不准自己跌坠<br>直到太阳就在我的指尖</p><p>我要高|飞 到世界的边缘<br>我要飞越<strong>没人</strong>到达的绝对<br>不到终|点 不准流下眼泪<br>要把最震撼的呐喊<br>留在灿烂瞬间</p><p>灿烂瞬间</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>七里香-周杰伦</title>
      <link href="/2018/07/08/%E4%B8%83%E9%87%8C%E9%A6%99-%E5%91%A8%E6%9D%B0%E4%BC%A6/"/>
      <url>/2018/07/08/%E4%B8%83%E9%87%8C%E9%A6%99-%E5%91%A8%E6%9D%B0%E4%BC%A6/</url>
      <content type="html"><![CDATA[<h2 id="歌词"><a href="#歌词" class="headerlink" title="歌词"></a>歌词</h2><h3 id="A"><a href="#A" class="headerlink" title="A"></a>A</h3><p>窗外的麻雀 在电线杆上多嘴<br>你说这一句 很有夏↓天的感觉<br>手中的铅笔 在纸上来来回回<br>我|用几行字 形容你是我的谁</p><p>秋刀鱼的滋味 猫跟你都想了解<br>初恋的香味 就这样被我^们寻回<br>那温暖的阳光 像刚摘的鲜艳草莓<br>你说你舍不得吃掉 这一种感觉</p><p>雨下整夜 我的爱溢出就像雨水<br>院子落叶 跟我的思念厚厚一叠<br>几句是非 也无法将我的热情冷却<br>你出现在我诗的每一页</p><p>雨下整夜 我的爱溢出就像雨水<br>窗台蝴蝶 像诗里纷飞的美丽章节<br>我接着写 把永远爱你<br>写进诗的结尾<br>你是我唯一想要的了解</p><h3 id="B"><a href="#B" class="headerlink" title="B"></a>B</h3><p>雨下整夜 我的爱溢出就像雨水<br>院子落叶 跟我的思念厚厚一叠<br>几句是非 也无法将我的热情冷却<br>你出现在我诗的每一页</p><p>那饱满的稻穗 幸福了~这个季节<br>而你的脸颊 像田里熟透的蕃茄<br>你突然|对我说 七里香的|名字很美<br>我此刻却只想亲吻你倔强的嘴</p><h3 id="C"><a href="#C" class="headerlink" title="C"></a>C</h3><p>雨下整夜 我的爱溢出就像雨水<br>院子落叶 跟我的思念厚厚一叠<br>几句是非 也无法将我的热情冷却<br>你出现在我诗的每一页</p><p>整夜<br>我的爱溢出就像雨水<br>窗台蝴蝶 像诗里↑纷飞的美丽~章节<br>我接着写 把永远爱你<br>写进诗的结尾<br>你是我唯一想要的了解</p><h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><p>A（麻雀）<br>B（秋刀鱼）<br>C（院子落叶）<br>C（窗台蝴蝶）</p><p>C（院子落叶）<br>B（稻穗）</p><p>C（院子落叶）<br>C（窗台蝴蝶）</p>]]></content>
      
      <categories>
          
          <category> Music </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 歌词 </tag>
            
            <tag> 音乐 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>MongoDB</title>
      <link href="/2018/07/07/MongoDB/"/>
      <url>/2018/07/07/MongoDB/</url>
      <content type="html"><![CDATA[<h2 id="1-官方文档及相关文档"><a href="#1-官方文档及相关文档" class="headerlink" title="1 官方文档及相关文档"></a>1 官方文档及相关文档</h2><p><a href="https://docs.mongodb.com/" target="_blank" rel="noopener">官方文档</a></p><h2 id="2-部署相关"><a href="#2-部署相关" class="headerlink" title="2 部署相关"></a>2 部署相关</h2><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1) 安装"></a>1) 安装</h3><p><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/" target="_blank" rel="noopener">ubuntu安装</a></p><h3 id="2-命令"><a href="#2-命令" class="headerlink" title="2) 命令"></a>2) 命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 启动</span><br><span class="line">sudo service mongod stop</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 重启</span><br><span class="line">sudo service mongod restart</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 关闭</span><br><span class="line">sudo service mongod stop</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 移除</span><br><span class="line">sudo apt-get purge mongodb-org*</span><br></pre></td></tr></table></figure><h2 id="3-常用使用"><a href="#3-常用使用" class="headerlink" title="3 常用使用"></a>3 常用使用</h2><h3 id="1）基础使用"><a href="#1）基础使用" class="headerlink" title="1）基础使用"></a>1）基础使用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 连接数据库</span><br><span class="line">mongo --host 192.168.199.9</span><br><span class="line">mongo --host 127.0.0.1:27017</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看当前数据库</span><br><span class="line">db</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看所有数据库</span><br><span class="line">show dbs</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 使用数据库</span><br><span class="line">use weihc</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看所有文档</span><br><span class="line">show collections</span><br></pre></td></tr></table></figure><h3 id="2）-查询"><a href="#2）-查询" class="headerlink" title="2） 查询"></a>2） 查询</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 基础查询(美化显示)</span><br><span class="line">db.player.find()</span><br><span class="line">db.player.find().pretty()</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 如果collection的名字特殊</span><br><span class="line">db.getCollection("3 test").find()</span><br><span class="line">db.getCollection("3-test").find()</span><br><span class="line">db.getCollection("stats").find()</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 过滤查询</span><br><span class="line">db.player.find(&#123;"_id": 1&#125;).pretty()</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查询并过滤结果</span><br><span class="line">db.player.find(&#123;"_id": 1&#125;, &#123;"nickname": 1&#125;).pretty()</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 加上判断条件</span><br><span class="line">db.player.find(&#123;"_id": 1, "log_time": &#123;$gt: 1530894156&#125;&#125;, &#123;"nickname": 1&#125;).pretty()</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> Work </tag>
            
            <tag> Database </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>MacOS系统初始化</title>
      <link href="/2018/05/20/%E5%88%9D%E5%A7%8B%E5%8C%96macOS/"/>
      <url>/2018/05/20/%E5%88%9D%E5%A7%8B%E5%8C%96macOS/</url>
      <content type="html"><![CDATA[<h2 id="1-基础软件"><a href="#1-基础软件" class="headerlink" title="1 基础软件"></a>1 基础软件</h2><ul><li>网易云音乐</li><li>QQ</li><li>Wechat</li><li>为知笔记</li><li>有道词典</li><li>邮箱大师</li><li>BatterZip</li><li>MPlayer</li><li>TotalFinder</li><li>TeamViewer</li><li><a href="https://getlantern.org/zh_CN/" target="_blank" rel="noopener">Lantern</a> &amp; <a href="https://nordvpn.com/zh/download/mac/" target="_blank" rel="noopener">NordVPN</a> (选择下载OpneVPN)</li><li><a href="http://xclient.info/s/vmware-fusion.html?t=cdbf30295617a80c269d392af7ea3fec89df6d04" target="_blank" rel="noopener">VMware</a></li><li><a href="http://xclient.info/s/navicat-premium.html?t=cdbf30295617a80c269d392af7ea3fec89df6d04" target="_blank" rel="noopener">Navicat Premium</a></li><li><a href="http://xclient.info/s/office-for-mac-2016.html?t=cdbf30295617a80c269d392af7ea3fec89df6d04" target="_blank" rel="noopener">Microsoft Office</a></li></ul><h2 id="2-Pycharm"><a href="#2-Pycharm" class="headerlink" title="2 Pycharm"></a>2 Pycharm</h2><ol><li><p>License Server </p><ul><li><a href="http://wolf.3dxtras.com" target="_blank" rel="noopener">http://wolf.3dxtras.com</a></li><li><a href="http://idea.lanyus.com/" target="_blank" rel="noopener">http://idea.lanyus.com/</a></li><li><a href="http://xidea.online" target="_blank" rel="noopener">http://xidea.online</a></li></ul></li><li><p>字体大小<br><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/初始化macOS/image-20180526201124712.png" alt="image-20180526201124712"></p></li><li><p>编辑区的字体和背景<br><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/初始化macOS/image-20180526201217732.png" alt="image-20180526201217732"></p><p>背景颜色</p><p><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/初始化macOS/image-20180526201314468.png" alt="image-20180526201314468"></p></li><li><p>设置指定后缀的文件的Editor， 这样就可以轻松提醒和注释等操作了<br><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/初始化macOS/image-20180526201714997.png" alt="image-20180526201714997"></p></li></ol><h2 id="3-Terminal"><a href="#3-Terminal" class="headerlink" title="3 Terminal"></a>3 Terminal</h2><ol><li><p>安装oh-my-zsh</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh</span><br></pre></td></tr></table></figure></li><li><p>创建alias</p><p>配置文件为 ~/.zshrc</p><p>一些博主推荐的alias</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">alias cls='clear'</span><br><span class="line">alias ll='ls -l'</span><br><span class="line">alias la='ls -a'</span><br><span class="line">alias vi='vim'</span><br><span class="line">alias javac="javac -J-Dfile.encoding=utf8"</span><br><span class="line">alias grep="grep --color=auto"</span><br><span class="line">alias -s html=mate   # 在命令行直接输入后缀为 html 的文件名，会在 TextMate 中打开</span><br><span class="line">alias -s rb=mate     # 在命令行直接输入 ruby 文件，会在 TextMate 中打开</span><br><span class="line">alias -s py=vi       # 在命令行直接输入 python 文件，会用 vim 中打开，以下类似</span><br><span class="line">alias -s js=vi</span><br><span class="line">alias -s c=vi</span><br><span class="line">alias -s java=vi</span><br><span class="line">alias -s txt=vi</span><br><span class="line">alias -s gz='tar -xzvf'</span><br><span class="line">alias -s tgz='tar -xzvf'</span><br><span class="line">alias -s zip='unzip'</span><br><span class="line">alias -s bz2='tar -xjvf'</span><br></pre></td></tr></table></figure></li><li><p>设置皮肤</p><p>偏好设置 -&gt; 描述文件 -&gt; Novel -&gt; 字体 -&gt; 更改 -&gt; 默认</p></li><li><p>解决破解软件无法打开的问题</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-QQ浏览器"><a href="#4-QQ浏览器" class="headerlink" title="4 QQ浏览器"></a>4 QQ浏览器</h2><ul><li>Adblock Plus</li><li>Onetab</li><li>谷歌翻译</li><li>手势<br><img src="/Users/weihuchao/Work/HexoBlog/public/img/blog/初始化macOS/image-20180526201841525.png" alt="image-20180526201841525"></li></ul><h2 id="5-搜狗输入法"><a href="#5-搜狗输入法" class="headerlink" title="5 搜狗输入法"></a>5 搜狗输入法</h2><ul><li>中英文标点</li><li>外观-主题-候选词个数-9</li></ul><h2 id="6-使用Airport同步数据"><a href="#6-使用Airport同步数据" class="headerlink" title="6 使用Airport同步数据"></a>6 使用Airport同步数据</h2>]]></content>
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
